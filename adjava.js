
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, setDoc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase ---
const firebaseConfig = {
  apiKey: "AIzaSyAkQz9pB2ZNlYIvdlTRvi4try3D8LLXS4g",
  authDomain: "databaseemploye.firebaseapp.com",
  projectId: "databaseemploye",
  storageBucket: "databaseemploye.firebasestorage.app",
  messagingSenderId: "408231477466",
  appId: "1:408231477466:web:e3bf5bd3eaca7cdcd3a5e3",
  measurementId: "G-DW8QJ5B231"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const SECURE_DASHBOARD_HTML = `
  <div class="dashboard-container" style="display:block;">
    <div class="header-area">
      <div style="display:flex; align-items:center; gap:15px;">
        <img src="https://lh3.googleusercontent.com/d/1BqWoqh1T1lArUcwAGNF7cGnnN83niKVl" width="70" style="border-radius:50%;">
        <div>
          <h1 class="page-title">Ù„ÙˆØ­Ø© ØªØ³ÙŠÙŠØ± Ù…Ù„ÙØ§Øª Ù…ÙˆØ¸ÙÙŠ Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª - Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø±ÙˆØ§ØªØ¨</h1>
          <p style="color:#6c757d; font-size:13px; margin-top:2px;">Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³ÙŠÙŠØ± Ù†ÙÙ‚Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† 2026</p>
        </div>
      </div>
      <button class="btn logout-btn" onclick="location.reload()">
        Ø®Ø±ÙˆØ¬ <i class="fas fa-sign-out-alt"></i>
      </button>
    </div>

    <div class="stats-grid">
      <div class="stat-card bg-blue">
        <h3 id="totalCount">0</h3>
        <p><i class="fas fa-users"></i> Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</p>
      </div>
      <div class="stat-card bg-green">
        <h3 id="confirmedCount">0</h3>
        <p><i class="fas fa-check-circle"></i> Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</p>
      </div>
      <div class="stat-card bg-orange">
        <h3 id="pendingCount">0</h3>
        <p><i class="fas fa-hourglass-half"></i> ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯</p>
      </div>
    </div>

    <div class="controls-bar" style="display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:10px;">
      
       <div style="position:relative; flex-grow:1;">
        <i class="fas fa-search" style="position:absolute; top:50%; right:15px; transform:translateY(-50%); color:#adb5bd;"></i>
        <input type="text" id="searchInput" class="search-input" style="padding-right:40px;" placeholder="Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹..." onkeyup="window.applyFilters()">
      </div>

      <select id="statusFilter" class="filter-select" onchange="window.applyFilters()" style="min-width:150px;">
        <option value="all">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</option>
        <option value="confirmed">âœ… Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</option>
        <option value="pending">â³ Ø§Ù„ØºÙŠØ± Ù…Ø¤ÙƒØ¯Ø©</option>
      </select>

      <button class="btn btn-add" onclick="window.openDirectRegister()">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯<i class="fas fa-plus"></i></button>
      <button class="btn btn-refresh" onclick="window.loadData()">ØªØ­Ø¯ÙŠØ« <i class="fas fa-sync-alt"></i></button>
      <button class="btn btn-firebase" onclick="window.openFirebaseModal()">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù<i class="fas fa-database"></i></button>
      <button class="btn btn-excel" onclick="window.downloadExcel()">Excel ØªØ­Ù…ÙŠÙ„<i class="fas fa-file-excel"></i></button>
      <button class="btn btn-pending-list" style="background-color:#6f42c1; color:white;" onclick="window.openPendingListModal()">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØºÙŠØ± Ù…Ø¤ÙƒØ¯Ø©<i class="fas fa-clipboard-list"></i></button>
      <button class="btn" style="background-color:#FF00AA; color:white;" onclick="window.checkNonRegistered()">ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ³Ø¬ÙŠÙ„<i class="fas fa-clipboard-list"></i></button>
      <button class="btn" style="background-color:#0d6efd; color:white;" onclick="window.openBatchPrintModal()">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª<i class="fas fa-print"></i></button>
    </div>

    <div style="background-color:#f1f3f5; padding:12px; border-radius:8px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-bottom:15px; border:1px solid #dee2e6;">
      <div style="font-weight:bold; color:#495057; font-size:14px; margin-left:10px;">
        <i class="fas fa-map-marker-alt" style="color:#d63384;"></i> ØªØµÙÙŠØ© Ø­Ø³Ø¨:
      </div>

      <select id="filter_level" class="filter-select" style="flex:1; min-width:130px;" onchange="window.updateDashMaps('level'); window.applyFilters()">
        <option value="">-- Ø§Ù„Ø·ÙˆØ± --</option>
        <option value="Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
        <option value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</option>
        <option value="Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù†ÙˆÙŠ</option>
        <option value="Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©">Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©</option>
      </select>

      <select id="filter_daaira" class="filter-select" style="flex:1; min-width:130px;" onchange="window.updateDashMaps('daaira'); window.applyFilters()">
        <option value="">-- Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© --</option>
        <option value="ØªÙˆÙ‚Ø±Øª">ØªÙˆÙ‚Ø±Øª</option>
        <option value="ØªÙ…Ø§Ø³ÙŠÙ†">ØªÙ…Ø§Ø³ÙŠÙ†</option>
        <option value="Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†">Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†</option>
        <option value="Ø§Ù„Ø­Ø¬ÙŠØ±Ø©">Ø§Ù„Ø­Ø¬ÙŠØ±Ø©</option>
        <option value="Ø§Ù„Ø·ÙŠØ¨Ø§Øª">Ø§Ù„Ø·ÙŠØ¨Ø§Øª</option>
      </select>

      <select id="filter_baladiya" class="filter-select" style="flex:1; min-width:130px;" onchange="window.updateDashMaps('baladiya'); window.applyFilters()">
        <option value="">-- Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>
      </select>

      <select id="filter_school" class="filter-select" style="flex:2; min-width:200px;" onchange="window.applyFilters()">
        <option value="">-- Ø§Ù„Ù…Ø¤Ø³Ø³Ø© --</option>
      </select>
      
      <button onclick="document.getElementById('filter_level').value=''; document.getElementById('filter_daaira').value=''; window.updateDashMaps('level'); window.applyFilters();" 
              style="border:none; background:transparent; color:#e63946; font-weight:bold; cursor:pointer;" title="Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙÙ„Ø§ØªØ±">
         <i class="fas fa-times"></i> Ù…Ø³Ø­
      </button>
    </div>

    <div class="table-container">
      <div class="table-responsive">
        <table id="dataTable">
          <thead>
            <tr>
              <th>CCP</th>
              <th>Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</th>
              <th>Ø§Ù„Ø±ØªØ¨Ø© / Ø§Ù„ÙˆØ¸ÙŠÙØ©</th>
              <th>Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</th>
              <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
              <th>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</th>
              <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <tr><td colspan="8" style="text-align:center; padding:30px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</td></tr>
          </tbody>
        </table>
      </div>
      
      <div class="pagination-container" id="paginationControls" style="display:none;">
        <button class="page-btn" id="prevBtn" onclick="window.changePage(-1)">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <span class="page-info" id="pageInfo">ØµÙØ­Ø© 1 Ù…Ù† 1</span>
        <button class="page-btn" id="nextBtn" onclick="window.changePage(1)">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>
  </div>
`;

// --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ---
const scriptURL = "https://script.google.com/macros/s/AKfycbypaQgVu16EFOMnxN7fzdFIFtiLiLjPX0xcwxEUjG5gsoeZ8yQJ5OL5IwIlJMgsrAJxwA/exec"; 

// Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØµÙØ­Ø§Øª
let allData = [];
let filteredData = [];
let currentPage = 1;
const rowsPerPage = 8;
let nonRegisteredData = []; 

// ==========================================
// â¬‡ï¸â¬‡ï¸â¬‡ï¸ Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© â¬‡ï¸â¬‡ï¸â¬‡ï¸
// ==========================================

const baladiyaMap = { 
    "ØªÙˆÙ‚Ø±Øª": ["ØªÙˆÙ‚Ø±Øª", "Ø§Ù„Ù†Ø²Ù„Ø©", "ØªØ¨Ø³Ø¨Ø³Øª", "Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©"], 
    "ØªÙ…Ø§Ø³ÙŠÙ†": ["ØªÙ…Ø§Ø³ÙŠÙ†", "Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±"], 
    "Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†": ["Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†", "Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†"], 
    "Ø§Ù„Ø­Ø¬ÙŠØ±Ø©": ["Ø§Ù„Ø­Ø¬ÙŠØ±Ø©", "Ø§Ù„Ø¹Ø§Ù„ÙŠØ©"], 
    "Ø§Ù„Ø·ÙŠØ¨Ø§Øª": ["Ø§Ù„Ø·ÙŠØ¨Ø§Øª", "Ø§Ù„Ù…Ù†Ù‚Ø±", "Ø§Ø¨Ù† Ù†Ø§ØµØ±"] 
};

const primarySchoolsByBaladiya = {
  "Ø§Ø¨Ù† Ù†Ø§ØµØ±": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ù…ÙŠØ¯ Ø¨Ù† Ø¨Ø§Ø¯ÙŠØ³ - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„ØªØ¨Ø³ÙŠ - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¨Ø´ÙŠØ± Ø§Ù„Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ…ÙŠ - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù‡ÙˆØ§Ø±ÙŠ Ø¨ÙˆÙ…Ø¯ÙŠÙ† - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„ØµØ§Ø¯Ù‚ Ø®Ù„ÙØ§ÙˆÙŠ - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø³Ø±Ø§ÙŠ Ù…Ø³Ø¹ÙˆØ¯ ( Ø§Ù„Ù…Ø±) - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„ÙŠÙ…Ø§Ù† Ø§Ù„Ø·ÙŠØ¨ - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„Ø¹Ù‚ÙˆÙ† Ø®Ù„ÙŠÙØ© - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù‚Ø­Ù…Øµ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø§Ù„Ø¹ÙŠØ¯ - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© 13 Ù…Ø§Ø±Ø³ 1962 - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù„Ø£Ù…ÙŠØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ø± - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹Ù‚Ø¨ÙŠ Ø§Ù„Ø·ÙŠØ¨ - Ø¥Ø¨Ù† Ù†Ø§ØµØ±" }],
  "Ø§Ù„Ø­Ø¬ÙŠØ±Ø©": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ø¨Ù† Ø¨Ø§Ø¯ÙŠØ³ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¯ÙŠØ¯ÙˆØ´ Ù…Ø±Ø§Ø¯ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù†Ø¹Ø§Ù… Ø³Ù„ÙŠÙ…Ø§Ù† - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙŠØ¯ Ø¢Ù„ Ø®Ù„ÙŠÙØ© - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹ÙŠØ¯ Ø¨Ù† Ø§Ù„Ø´ÙŠØ® - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¨Ø´ÙŠØ± Ø§Ù„Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ…ÙŠ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…ØµØ·ÙÙ‰ Ø¨Ù† Ø¨ÙˆÙ„Ø¹ÙŠØ¯ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø§Ù„ÙƒØ§Ø³ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ† Ø§Ù„Ø£ÙŠÙˆØ¨ÙŠ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ† - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ù„ÙŠ Ø¹Ù…Ø§Ø± - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¯ÙˆÙ…Ø© Ø£Ø­Ù…Ø¯ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ù…Ø§Ø± ÙŠØ§Ø³Ù - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ ÙƒØ­ÙˆÙ„ Ø§Ø­Ù…Ø¯ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ÙƒØ±ÙŠØ¨Ø¹ Ù…Ø³Ø¹ÙˆØ¯ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø© - - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨Ø§Ù„Ø£Ø¹ÙˆØ± Ø§Ù„Ø¹Ù„Ù…ÙŠ ( Ù„Ù‚Ø±Ø§Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 2) - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø¬Ù…Ø¹ Ù…Ø¯Ø±Ø³ÙŠ Ø­ÙŠ Ø§Ù„Ù…ÙŠØ± - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø®Ù†ÙØ± Ù…Ø­Ù…Ø¯ Ù„Ø­Ø³Ù† - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø­ÙŠ Ø¨ÙˆØ¶ÙŠØ§Ù Ù…Ø­Ù…Ø¯ Ù„Ù‚Ø±Ø§Ù - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ø¯Ø§Ø¯ÙŠ Ø§Ù„Ø¹ÙŠØ¯ - Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }],
  "Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¨Ø­Ø±ÙŠ Ø¨Ù† Ø§Ù„Ù…Ù†ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…ØµØ·ÙÙ‰ Ø¨Ù† Ø¨ÙˆÙ„Ø¹ÙŠØ¯ - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨ÙˆÙ„ÙŠÙØ© Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø±Ø§Ù† - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØµÙˆÙ„ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ø§Ù† ( 5 Ø¬ÙˆÙŠÙ„ÙŠØ©) - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø´ÙŠØ± ÙƒØ¯Ø© - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ø§Ù† Ø¨Ù† Ù†ÙˆÙ†Ø© - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ù‚Ø¨Ø© Ø¨Ù† Ù†Ø§ÙØ¹ - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø§Ø®Ø¶Ø± Ø¨Ù† Ù„Ù…Ù†ÙˆØ± - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØºÙˆÙ„ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§Ù„Ø­ (Ø­ÙŠ Ø§Ù„Ø³Ù„Ø§Ù…) - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ù…Ø¯ Ù…Ù‚Ø¯Ø§Ø¯ - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ø­Ù…Ø¯ Ø¨Ù† Ù„Ù…Ù†ÙˆØ± - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }],
  "Ø§Ù„Ø·ÙŠØ¨Ø§Øª": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø§Ø³ØªØ§Ø° Ø¹Ù…Ø± Ø¨Ù† Ø¹Ø²Ø© - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¹Ù…Ø§Ø±ÙŠ Ù…Ø¹Ù…Ø± - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù‚Ø­Ù…Øµ Ù…Ø­Ù…Ø¯ - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø­Ù…Ø¯Ø§ÙˆÙŠ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„ÙŠÙ…Ø§Ù†(Ø§Ù„Ù‚ÙˆØ§Ø´ÙŠØ´) - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…ÙŠÙ„ÙˆØ¯ ØªØ±ÙŠØ´(Ø¨ÙƒØ§Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©) - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø²Ù‚ÙˆÙ†ÙŠ Ø¨Ø´ÙŠØ± - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù…Ø±Ø§Ø¯ Ù…Ø¹Ù…Ø±( Ø¨Ø±Ø­Ù…ÙˆÙ†) - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø´ÙŠÙ† - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù‚Ø¹Ø¨ÙŠ Ø¹Ù„ÙŠ (Ø¨Ø¦Ø± Ø§Ù„Ø¹Ø³Ù„) - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¨Ø§Ù„Ø·Ø§Ù‡Ø± Ø§Ù„Ø·ÙŠØ¨ - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù…Ù†ØµÙˆØ±ÙŠ Ù…Ø¨Ø±ÙˆÙƒ - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¨Ù† Ù‚Ù„ÙŠØ© Ø¹Ù…Ø± - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø±ÙˆØ§Øµ Ø£Ø­Ù…Ø¯ - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¯Ø­Ø¯ÙŠ Ù…Ø³Ø¹ÙˆØ¯ - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø®Ù„ÙŠÙØ© Ø®Ù„ÙŠÙØ© - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨Ø±Ø§Ù‡Ù…ÙŠ Ø¨Ø±Ø§Ù‡ÙŠÙ… - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨Ù„Ø®ÙŠØ± Ø§Ù„Ø³Ø¹ÙŠØ¯ - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù„Ù€ÙŠÙ€ØªÙŠÙ… Ù…Ø­Ù…Ø¯ (Ø¹Ø«Ù…Ø§Ù† Ø¨Ù† Ø¹ÙØ§Ù†) - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨Ø§Ù„Ø¹Ø¬Ø§Ù„ Ù…Ø¹Ù…Ø± - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„ØªØ¬Ø§Ù†ÙŠ Ø§Ù„Ø¯Ù„ÙŠØ¹ÙŠ - Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }],
  "Ø§Ù„Ø¹Ø§Ù„ÙŠØ©": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù‚ÙˆØ§Ø¯Ø±ÙŠ Ù„Ø®Ø¶Ø± - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù‚Ø§Ø¯Ø±ÙŠ Ø£Ø­Ù…Ø¯ - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø§Ù…Ø§Ù… Ø§Ù„ØºØ²Ø§Ù„ÙŠ Ø¨Ø§Ù„Ø¹Ø§Ù„ÙŠØ© - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¹Ø¨ÙŠØ¯Ù„ÙŠ Ø£Ø­Ù…Ø¯ - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø³ÙŠØ¯ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø§Ø­Ù…Ø¯ Ø§Ø­Ù…Ø¯ - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø·ÙØ­ÙŠ Ù…Ø³Ø¹ÙˆØ¯ ( Ø§Ù„Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ) - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØºØ¨Ø§Ø¦Ø´ÙŠ Ø¨Ø´ÙŠØ± - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨Ø³Ø§Ø³ÙŠ Ø§Ù„Ø·Ø§Ù‡Ø± - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø­Ù…Ø§ÙŠÙ…ÙŠ Ù…ÙŠÙ„ÙˆØ¯ - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø­Ø¨ÙŠ Ø¹Ù…Ø§Ø± - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø±Ø¨Ø±ÙˆØ¨ Ù…Ø­Ù…Ø¯ - Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }],
  "Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø£Ø³Ø§Ù…Ø© Ø¨Ù† Ø²ÙŠØ¯ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ù…ÙˆØ³Ù‰ Ø§Ù„Ø·ÙŠØ¨ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹Ù‚ÙŠØ¯ Ø³ÙŠ Ø§Ù„Ø­ÙˆØ§Ø³ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ø¨Ùˆ Ø¹Ø¨ÙŠØ¯Ø© Ø¨Ù† Ø§Ù„Ø¬Ø±Ø§Ø­ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø´ÙŠØ± Ø®Ø°Ø±Ø§Ù† - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ù…Ø¯ Ø´Ø§ÙÙˆ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø±ÙƒØ¨ÙŠØ© Ø­Ø³ÙŠÙ† - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø§Ù„Ø´Ø±ÙŠÙ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø§Ø¨Ø§ Ø³Ø¹ÙŠØ¯ Ø­Ø´Ø§Ù†ÙŠ ( Ø§Ù„Ù…Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ) - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨Ù† Ø§Ù„Ø²Ø§ÙˆÙŠ Ø§Ù„Ø³Ø¹ÙŠØ¯ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¬Ø§ÙˆÙŠ Ù…Ø­Ù…Ø¯ - Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }],
  "Ø§Ù„Ù…Ù†Ù‚Ø±": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ù…Ø¯ Ø¨ÙˆØ¹Ø³Ø±ÙŠØ© - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù…Ø³Ù…Ø§Ø±ÙŠ Ø§Ù„Ø§Ø®Ø¶Ø± Ø§Ù„Ù„ÙˆÙŠØ¨Ø¯ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù‚Ø¨ÙŠ Ø¨Ù„Ù‚Ø§Ø³Ù… - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø¨Ù† Ø§Ù„ØµØ¯ÙŠÙ‚ Ø¹Ù„ÙŠ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø®ÙˆØ±Ø§Ø±Ø© Ø¨Ø´ÙŠØ± - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø´ÙˆÙŠØ© Ø¹Ù„ÙŠ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯Ø¨ÙƒØ§Ø±ÙŠ Ø§Ù„Ø³Ø§ÙŠØ­ Ø§Ù„Ø´Ø§Ø¨ÙŠ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù…Ø­Ù…Ø¯ Ø®ÙŠØ±Ø§Ù†ÙŠ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ø­Ù…Ø¯ Ø¨Ù† Ø§Ù„ØµØºÙŠØ± Ù‚ÙˆÙŠØ¯Ø±ÙŠ (Ø§Ù„Ø¨Ø­Ø±ÙŠ) - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù„Ø§Ù„Ù‚Ø©( Ø®ÙˆØ±Ø§Ø±Ø© Ù…Ø­Ù…Ø¯) - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù†ÙˆØ§Ø±ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø²Ø±ÙˆÙ‚ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¯Ù‚Ø¹Ø© Ù…Ø­Ù…Ø¯ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù…Ø­Ù…Ø¯ Ù†ÙˆØ§Ø±ÙŠ( Ø­ÙŠ Ø§Ù„Ù†Ø®ÙŠÙ„) - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ù…Ø¯ Ù…Ø§ÙŠÙˆ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØºÙ†Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§ÙŠØ´ - Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¨Ù„Ù‡ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØºÙŠØ± - Ø§Ù„Ù…Ù†Ù‚Ø±" }],
  "Ø§Ù„Ù†Ø²Ù„Ø©": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø¯Ù„Ø§Ù„ÙŠ Ø¹Ù„ÙŠ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù‚Ø§Ø¯Ø±ÙŠ Ø£Ø­Ù…Ø¯ Ø³ÙŠØ¯ÙŠ Ù…Ø§Ø¶ÙŠ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø¹Ù…Ø± Ø§Ù„Ù†ÙˆÙŠ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø·Ø±ÙŠØ© Ù„Ù…Ù†ÙˆØ± - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨ÙˆÙ„ÙŠÙØ© Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø±Ø§Ù† - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØªÙ…Ø§Ø³ÙŠÙ†ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ÙƒØ¯Ø© Ø¨Ø´ÙŠØ± - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¹Ø§ÙŠØ´ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø·Ø±ÙŠØ© Ù…Ø®Ù„ÙˆÙ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù‚Ù…Ùˆ Ù…Ø­Ù…Ø¯ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØªÙ…Ø±Ù†ÙŠ Ù…ÙˆØ³Ù‰ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø³Ù„Ø§Ù…ÙŠ Ù…Ø­Ù…Ø¯ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù†Ù‚ÙˆØ¯ÙŠ Ù…Ø­Ù…Ø¯ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„Ø¹ÙŠÙØ§ÙˆÙŠ Ø§Ù„ØªØ¬Ø§Ù†ÙŠ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¹Ù‚Ø§Ù„ Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ù…ÙŠØ¯ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¹Ø´Ø§Ø¨ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙŠØ¯ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ ÙØ±Ø­ÙŠ Ø¨Ø­Ø±ÙŠ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´ÙŠØ® Ø¨ÙˆØ¹Ù…Ø§Ù…Ø© - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø±Ø­Ù…Ø§Ù†ÙŠ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ ÙƒØ±Ø§Ø´ Ø§Ù„Ø£Ø®Ø¶Ø± - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨Ù† Ø­Ù…ÙŠØ¯Ø© Ø¹Ù„ÙŠ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ù‡Ø¯ÙŠØ© Ø¬Ø§Ø¨ Ø§Ù„Ù„Ù‡ ( Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„2) - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù…Ø´Ø±ÙŠ ØºØ²Ø§Ù„ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø¹Ø§Ø´ÙˆØ± Ø§Ù„Ø³Ø¨ØªÙŠ - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ù„ÙˆÙŠ Ø­Ù…Ø²Ø© - Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù‚Ù…Ùˆ Ù…Ø­Ù…ÙˆØ¯ - Ø§Ù„Ù†Ø²Ù„Ø©" }],
  "Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¨Ø´ÙŠØ± Ø§Ù„Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…ÙŠ - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¯Ø­Ù…Ø§Ù†ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ø§Ù† Ù‚ÙˆÙ‚ - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø¯ÙŠØ§Ø± Ù…Ø­Ù…Ø¯ - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù‚Ø§Ø¯Ø±ÙŠ Ù…ÙˆØ³Ù‰ - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„Ø§Ø®Ø¶Ø±ÙŠ Ø§Ø­Ù…Ø¯ - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ ØªÙ…Ø±Ù†ÙŠ Ø¹Ù…Ø§Ø±(Ø­ÙŠ Ø§Ù„Ù†Ù‡Ø¶Ø©) - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø²Ø±ÙˆÙ‚ÙŠ Ø¹Ù„ÙŠ - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø­Ø§Ø¬ÙŠ Ø¹Ù…Ø± - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ù…ØµØ·ÙÙ‰ Ø¨Ù† Ø¨ÙˆÙ„Ø¹ÙŠØ¯ Ù‚ÙˆÙ‚ - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø´Ø§Ø´Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØºÙŠØ± - Ø¨Ù„Ø¯Ø© Ø§Ø¹Ù…Ø±" }],
  "ØªØ¨Ø³Ø¨Ø³Øª": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…Ø­Ù…Ø¯ Ø¹Ø´Ø¨ÙŠ - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø²Ù†Ùˆ Ø¹Ø¨Ø¯ Ø§Ù„Ø­ÙÙŠØ¸ - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¬ÙˆØ§Ø¯ Ø¹Ù…Ø± (ØªØ¨Ø³Ø¨Ø³Øª Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ© ) - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø§Ø®Ø¶Ø± (Ø¨Ù†ÙŠ ÙŠØ³ÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©) - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¬ÙŠÙ„Ø§Ù†ÙŠ ÙƒÙŠÙ†Ø© - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„ØªØ¬Ø§Ù†ÙŠ Ù†ØµÙŠØ±ÙŠ - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø¯ÙˆÙ…Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø·Ø§Ù‡Ø± - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¬Ù„Ø§Ø¨ÙŠØ© Ø¹Ø¨Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ø± - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø£Ø­Ù…Ø¯ Ø´Ø§ÙˆØ´ - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø­ÙŠ Ø§Ù„ØµÙˆÙ…Ø§Ù… - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨ÙˆØºØ±Ø§Ø±Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§Ù„Ø­ - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„ÙØªØ­ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ø¬Ø±Ùˆ Ø¨Ø­Ø±ÙŠ) - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„Ø¹ÙŠØ§Ø· Ø³Ø¹Ø¯ - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø£ÙˆÙ„ Ù†ÙˆÙÙ…Ø¨Ø± 1954 - ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø±Ù…ÙˆÙ† Ø¬Ù„ÙˆÙ„ Ø­ÙŠ ÙØ±Ø¬Ù…ÙˆÙ† - ØªØ¨Ø³Ø¨Ø³Øª" }],
  "ØªÙˆÙ‚Ø±Øª": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ† - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø®Ù†Ø³Ø§Ø¡ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´ÙŠØ® Ø§Ù„Ø·Ø§Ù‡Ø± Ø§Ù„Ø¹Ø¨ÙŠØ¯ÙŠ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ø¸Ø§Ù…Ùˆ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¨Ø­Ø±ÙŠ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø§Ø¨Ø§ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø´Ø§ÙØ¹ÙŠ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø§Ù…Ø§Ù… Ù…Ø§Ù„Ùƒ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ø¨ÙŠØ¯Ù„ÙŠ Ø£Ø­Ù…Ø¯ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹ÙŠØ§Ø¯ÙŠ Ø¹Ù„ÙŠ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù†Ø§ØµØ± Ø¨Ø´ÙŠØ± - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù…ÙˆÙ‡ÙˆØ¨ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù† - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ø­Ù…Ø¯ Ø¨ÙˆØ±Ù†Ø§Ù† - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ø§Ù„ØµØ¯ÙŠÙ‚ Ø¹Ø¨Ø¯ Ø§Ù„Ù‡Ø§Ø¯ÙŠ (Ø§Ù„Ø±Ù…Ø§Ù„ 1) - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø²Ø§Ø¨ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø§Ù„ÙŠ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø£Ù…ÙŠØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…ÙŠØ¹Ø§Ø¯ÙŠ Ù…Ø­Ù…Ø¯ ÙØ®Ø± Ø§Ù„Ø¯ÙŠÙ† - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØªØ§ØªØ§ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§Ø¯Ù‚ (Ø§Ù„Ø±Ù…Ø§Ù„ 02) - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ ÙƒØ§ÙÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­ÙŠÙ… - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¹Ø¸Ø§Ù…Ùˆ Ù…Ø­Ù…Ø¯ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨ÙˆÙ„Ø¹Ø±Ø§Ø³ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø­ÙŠ Ø§Ù„Ù†Ø¶Ø§Ù„ Ù…Ø¬Ù…Ø¹ Ù…Ø¯Ø±Ø³ÙŠ Ø­ÙŠ 1190 Ù…Ø³ÙƒÙ† - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ù…Ø§Ù† ÙŠÙˆØ³Ù - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¯Ø¨Ø§Ø® Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠ 7 - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¹ÙŠØ¯ Ù…Ø´Ø±ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¯Ø¨Ø§Øº Ø¹Ù…Ø± Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠ 09 - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ØªØ§ØªØ§ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ø± - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¨Ø§Ù„Ø·Ø§Ù‡Ø± Ø¹Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ - ØªÙ‚Ø±Øª" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù‚Ø§Ø¯Ø±ÙŠ Ø¹Ù„Ø§Ù„ Ø­ÙŠ 700 Ù…Ø³ÙƒÙ† - ØªÙ‚Ø±Øª" }],
  "Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨ÙˆØ³Ø¹Ø§Ø¯Ø© Ø¨Ù† Ø¯Ù„Ø§Ù„ÙŠ - Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„ØªØ¨Ø³ÙŠ - Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø·ÙŠØ¨ Ø¨ÙˆØ±ÙŠØ§Ù„Ø© - Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø±ÙƒØ¨ÙŠØ© Ù…Ø­Ù…Ø¯ Ø¨ÙƒØ§Ø± - Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¨Ù† Ù‚Ø·Ø§Ù† Ø§Ù„Ø³Ø§ÙŠØ­ - Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø§Ø³Ùˆ Ø§Ù„Ø³Ø¹ÙŠØ¯ - Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }],
  "ØªÙ…Ø§Ø³ÙŠÙ†": [{ name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ù…ÙˆÙ„ÙˆØ¯ ÙØ±Ø¹ÙˆÙ† - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø³Ø¹Ø¯ÙŠ Ø¨ÙˆØ®Ù†Ø¯Ù‚ - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´ÙŠØ® Ø§Ù„ØµØºÙŠØ± Ø§Ù„ØªØ¬Ø§Ù†ÙŠ - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø´ÙŠØ® Ø§Ù„ØµØ§Ø¯Ù‚ Ø§Ù„ØªØ¬Ø§Ù†ÙŠ - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø¨Ø´ÙŠØ±ØªØ§ØªÙŠ - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨ÙƒÙˆØ´ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙŠØ¯ - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø±Ø²Ù‚Ø§Ù† Ø§Ø­Ù…Ø¯ - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ù„Ø¨Ø³ÙŠØ³ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨ÙˆØ¨ÙƒØ±ÙŠ Ø¨Ø´ÙŠØ± - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ù† Ù‚Ø§Ù†Ø© Ø¨Ø±Ø§Ù‡ÙŠÙ… (Ø§Ù„Ø¨Ø­ÙˆØ± 2) - Ù†Ù…Ø§Ø³ÙŠÙ†" }, { name: "Ø¥Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ ØªØ¬Ø§Ù†ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ù‚ (Ø­ÙŠ Ø§Ù„ÙƒÙˆØ¯ÙŠØ© ) - Ù†Ù…Ø§Ø³ÙŠÙ†" }]
};

const institutionsByDaaira = {
  "ØªÙˆÙ‚Ø±Øª": {
    "Ù…ØªÙˆØ³Ø·": [{ name: "Ù…ØªÙˆØ³Ø·Ø© Ø³Ø¹Ø¯ Ø¨Ù† Ø£Ø¨ÙŠ ÙˆÙ‚Ø§Øµ â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø¥Ù…Ø§Ù… Ø¹Ù„ÙŠ â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø£Ù…ÙŠÙ† Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø´ÙŠØ® Ø§Ù„Ù…Ù‚Ø±Ø§Ù†ÙŠ â€“ ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ù† Ù‡Ø¯ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠ â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ù…ÙŠØ¯ Ø¨Ù† Ø¨Ø§Ø¯ÙŠØ³ â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø­Ù…Ø²Ø© Ø¨Ù† Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø·Ù„Ø¨ â€“ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù†ØµØ±Ø§Øª Ø­Ø´Ø§Ù†ÙŠ â€“ ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¹ÙŠØ³Ø§Øª Ø§ÙŠØ¯ÙŠØ± â€“ Ø§Ù„Ø¨Ù‡Ø¬Ø© ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© ØªØ¬ÙŠÙ†ÙŠ Ù…Ø­Ù…Ø¯ â€“ Ø¹ÙŠÙ† Ø§Ù„ØµØ­Ø±Ø§Ø¡ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ø¨Ù† Ø±Ø´Ø¯ â€“ Ø­ÙŠ Ø§Ù„Ø¹Ø±Ù‚ÙˆØ¨ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø±Ø¶Ø§ Ø­ÙˆØ­Ùˆ â€“ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…ÙŠØ¹Ø§Ø¯ÙŠ ÙØ®Ø± Ø§Ù„Ø¯ÙŠÙ† â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¹Ø·Ø§Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØºÙŠØ± â€“ Ø³ÙŠØ¯ÙŠ Ù…Ù‡Ø¯ÙŠ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø±Ø§Ù† Ø¨ÙˆÙ„ÙŠÙØ© â€“ Ø­ÙŠ Ø§Ù„Ø±Ù…Ø§Ù„ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¤Ù…Ù† Ø¨Ù† Ø¹Ù„ÙŠ â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ù† Ø§Ù„Ø²Ø§ÙˆÙŠ Ø¹Ù„ÙŠ â€“ ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø¨Ø´ÙŠØ± Ø§Ù„Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…ÙŠ â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø­ÙŠ 5 Ø¬ÙˆÙŠÙ„ÙŠØ© â€“ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ù† Ø­ÙŠØ²ÙŠØ© Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ â€“ Ø¹ÙŠÙ† Ø§Ù„ØµØ­Ø±Ø§Ø¡ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ù† Ù‚Ù„ÙŠØ© Ù…Ø­Ù…Ø¯ â€“ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© ØªÙ…Ø±Ù†ÙŠ Ù…Ø­Ù…Ø¯ â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø´Ø§ÙˆØ´ Ù…Ø­Ù…Ø¯ â€“ ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„ØªØ¬Ø§Ù†ÙŠ Ø§Ù„ØµØ§Ø¯Ù‚ â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø®Ø±ÙˆØ¨ÙŠ Ù…Ø­Ù…Ø¯ Ù„Ø®Ø¶Ø± â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø³Ø¨Ù‚Ø§Ù‚ Ø§Ù„Ø¹ÙŠØ¯ â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¯Ù‚Ø¹Ø© Ø§Ù„Ø·Ø§Ù‡Ø± â€“ ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ø¯ÙˆØ¯Ø© Ù…Ø¹Ù…Ø± Ø¨Ù† Ø¹Ù„ÙŠ â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¯Ø§Ø´Ø± Ø§Ù„Ø­Ø§Ø¬ â€“ Ø­ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø±ÙˆØ§Øµ Ù…Ø­Ù…Ø¯ â€“ Ø­ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨ÙˆÙ„ÙŠÙØ© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙŠØ¯ â€“ Ø­ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ØªÙˆÙ‚Ø±Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø³Ø§ÙŠØ­ â€“ Ø­ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ØªÙˆÙ‚Ø±Øª" }],
    "Ø«Ø§Ù†ÙˆÙŠ": [{ name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£Ù…ÙŠØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ø± â€“ ØªÙˆÙ‚Ø±Øª" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ø§Ù† Ø§Ù„ÙƒÙˆØ§ÙƒØ¨ÙŠ â€“ ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø­Ø³Ù† Ø¨Ù† Ø§Ù„Ù‡ÙŠØ«Ù… â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø¨Ø´ÙŠØ± Ø§Ù„Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…ÙŠ â€“ ØªØ¨Ø³Ø¨Ø³Øª" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ù‡ÙˆØ§Ø±ÙŠ Ø¨ÙˆÙ…Ø¯ÙŠÙ† â€“ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø¨Ù„Ù‚Ø§ÙŠØ¯ â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ù„Ø²Ù‡Ø§Ø±ÙŠ ØªÙˆÙ†Ø³ÙŠ â€“ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ø¨Ø¯ÙŠØ©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¨ÙˆØ®Ø§Ø±ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ â€“ Ø§Ù„Ù†Ø²Ù„Ø©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¹Ø¨ÙˆØ¯Ø© Ø¹Ù„ÙŠ â€“ Ø­ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ØªÙˆÙ‚Ø±Øª" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ù…Ø³ØºÙˆÙ†ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ§Ù„Ø­ â€“ Ø­ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„" }]
  },
  "Ø§Ù„Ø­Ø¬ÙŠØ±Ø©": {
    "Ù…ØªÙˆØ³Ø·": [{ name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ø¨Ù† Ø³ÙŠÙ†Ø§ â€“ Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù„Ø®Ø¶Ø§Ø±ÙŠ Ù„Ø®Ø¶Ø± â€“ Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø²ÙˆØ§Ø¨Ø±ÙŠ Ù…Ø³Ø¹ÙˆØ¯ â€“ Ù„Ù‚Ø±Ø§Ù Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø³Ø§ÙŠØ­ Ø¨Ù† Ø¹ÙŠØ³Ù‰ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§ÙŠØ­ â€“ Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ù† Ø´ÙˆÙŠØ­Ø© Ø­Ù…Ø²Ø© â€“ Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø´Ù„ØºÙˆÙ… Ø¨Ø´ÙŠØ± â€“ Ø§Ù„Ø´Ù‚Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø´Ø¹ÙŠØ¨ Ø§Ù„Ø£Ø®Ø¶Ø± â€“ Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }],
    "Ø«Ø§Ù†ÙˆÙŠ": [{ name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø·Ø§Ø±Ù‚ Ø¨Ù† Ø²ÙŠØ§Ø¯ â€“ Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¨Ø³Ø§Ø³ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØºÙŠØ± â€“ Ø§Ù„Ø¹Ø§Ù„ÙŠØ©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ù„Ø­Ø³ÙŠÙ†ÙŠ Ù…Ø­Ù…Ø¯ â€“ Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¨Ø§Ù„Ø¶ÙŠØ§Ù Ù…Ø­Ù…Ø¯ â€“ Ù„Ù‚Ø±Ø§Ù Ø§Ù„Ø­Ø¬ÙŠØ±Ø©" }]
  },
  "Ø§Ù„Ø·ÙŠØ¨Ø§Øª": {
    "Ù…ØªÙˆØ³Ø·": [{ name: "Ù…ØªÙˆØ³Ø·Ø© Ø£Ø­Ù…Ø¯ Ø²Ø¨Ø§Ù†Ø© â€“ Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…ÙˆØ³Ù‰ Ø¨Ù† Ù†ØµÙŠØ± â€“ Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø·Ø§Ø±Ù‚ Ø¨Ù† Ø²ÙŠØ§Ø¯ â€“ Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù†ØªØ§Ø±ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¯Ù„ÙŠÙ„Ø¹ÙŠ â€“ Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø¹Ù‚ÙˆÙ† Ù…Ø­Ù…Ø¯ Ø§Ù„ÙƒØ¨ÙŠØ± â€“ Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…Ø¹Ù…Ø±ÙŠ Ù…Ø­Ù…Ø¯ â€“ Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø¹ÙŠØ¯ Ø²Ù‚Ø±ÙŠØ± â€“ Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ù„Ø¹Ø¬Ø§Ù„ Ø£Ø­Ù…Ø¯ â€“ Ø§Ù„Ø®Ø¨Ù†Ø© Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø§Ù„Ø®Ø°ÙŠØ± Ø£Ø­Ù…Ø¯ â€“ Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø±Ø§Ø¨Ø­ÙŠ Ø§Ù„Ø¹ÙŠØ¯ â€“ Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¬Ø§Ù‡Ø¯ Ø¨ÙƒØ§Ø±ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ø± â€“ Ø§Ù„Ø¯Ù„ÙŠÙ„ÙŠØ¹ÙŠ Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }],
    "Ø«Ø§Ù†ÙˆÙŠ": [{ name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø±Ø´ÙŠÙ‚ Ø§Ù„Ù‚ÙŠØ±ÙˆØ§Ù†ÙŠ â€“ Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ù…Ù†Ù‚Ø± â€“ Ø¯Ù‚Ø¹Ø© Ø¹Ù„ÙŠ Ø§Ù„Ù…Ù†Ù‚Ø±" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¹Ø¨ÙŠØ¯ Ø£Ø­Ù…Ø¯ â€“ Ø¨Ù† Ù†Ø§ØµØ±" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø²Ù‚ÙˆÙ†ÙŠ Ø§Ù„ØµØºÙŠØ± â€“ Ø§Ù„Ø¯Ù„ÙŠÙ„ÙŠØ¹ÙŠ Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }]
  },
  "Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†": {
    "Ù…ØªÙˆØ³Ø·": [{ name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„ÙØ±Ø§Ø¨ÙŠ â€“ Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø·ÙØ­ÙŠ Ù…Ø³Ø¹ÙˆØ¯ â€“ Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ù„Ø­Ø§Ø±Ø« Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§ÙŠØ­ â€“ Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø³ÙˆÙÙŠ Ø§Ù„Ù‡Ø§Ø´Ù…ÙŠ â€“ Ø§Ù„Ø·ÙŠØ¨Ø§Øª" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ø§Ù† Ù‚ÙˆØªØ§Ù„ â€“ Ø§Ù„Ù‚ØµÙˆØ± Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø´Ù‡ÙŠØ¯ Ø£Ø­Ù…ÙŠØ¯Ø© Ø¨ÙˆØ­ÙØµ â€“ Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ø±ÙƒØ¨ÙŠØ© Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø²Ø§Ù‚ â€“ Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø´Ù‡ÙŠØ¯ ØªÙ…Ø§Ø³ÙŠÙ†ÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ø§Ù† â€“ Ù„Ù‡Ø±ÙŠÙ‡ÙŠØ±Ø© Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }],
    "Ø«Ø§Ù†ÙˆÙŠ": [{ name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ â€“ Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¨Ù† Ø¹Ù…Ø± Ø§Ù„Ù†ÙˆÙŠ â€“ Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø¹Ù…ÙŠØ´ Ø³Ø¹Ø¯ÙˆÙ† â€“ Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†" }]
  },
  "ØªÙ…Ø§Ø³ÙŠÙ†": {
    "Ù…ØªÙˆØ³Ø·": [{ name: "Ù…ØªÙˆØ³Ø·Ø© Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨ â€“ ØªÙ…Ø§Ø³ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…ÙˆÙ„Ø§ØªÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§ÙŠØ­ â€“ Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„Ø±Ø§Ø²ÙŠ â€“ Ø§Ù„Ø¨Ø­ÙˆØ± ØªÙ…Ø§Ø³ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù‚ÙˆÙ†ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø·ÙŠØ¨ â€“ Ø³ÙŠØ¯ÙŠ Ø¹Ø§Ù…Ø± ØªÙ…Ø§Ø³ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…Ø¹Ø±ÙƒØ© Ù‚Ø±Ø¯Ø§Ø´ â€“ Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„ØµØ¯ÙŠÙ‚ Ø¨Ù† ÙŠØ­ÙŠ â€“ Ø­ÙŠ Ø§Ù„ÙƒØ¯ÙŠØ© ØªÙ…Ø§Ø³ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ø±ÙƒØ© Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø²Ø§Ù‚ â€“ Ù‚ÙˆÙ‚ Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¨Ø¯ÙˆØ¯Ø© Ø§Ù„Ø³Ø§ÙŠØ­ â€“ ØªÙ…Ù„Ø§Ø­Øª ØªÙ…Ø§Ø³ÙŠÙ†" }, { name: "Ù…ØªÙˆØ³Ø·Ø© Ø¹Ù„ÙŠ Ø¨Ù† Ø¨Ø§Ø¯ÙŠØ³ â€“ Ù‚ÙˆÙ‚ Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±" }],
    "Ø«Ø§Ù†ÙˆÙŠ": [{ name: "Ø«Ø§Ù†ÙˆÙŠØ© Ù…ÙØ¯ÙŠ Ø²ÙƒØ±ÙŠØ§ â€“ ØªÙ…Ø§Ø³ÙŠÙ†" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø¹ÙŠØ¯ Ø¨Ù† Ø§Ù„ØµØ­Ø±Ø§ÙˆÙŠ â€“ Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ù‚ÙˆÙŠØ¯Ø±ÙŠ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ÙŠØ¯ â€“ ØªÙ…Ø§Ø³ÙŠÙ†" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© ØªØ¬ÙŠÙ†ÙŠ Ù…Ø­Ù…Ø¯ Ù„Ø®Ø¶Ø± â€“ Ø¨Ù„Ø¯Ø© Ø¹Ù…Ø±" }, { name: "Ø«Ø§Ù†ÙˆÙŠØ© Ù…Ø§Ù„Ùƒ Ø¨Ù† Ù†Ø¨ÙŠ â€“ Ù‚ÙˆÙ‚" }]
  }
};

// ==========================================
// 1. Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„
window.verifyAdminLogin = async function() {
    const passInput = document.getElementById("adminPass").value;
    const btn = document.querySelector("#loginOverlay button");

    if(!passInput) return Swal.fire('ØªÙ†Ø¨ÙŠÙ‡', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±', 'warning');

    const oldText = btn.innerHTML;
    btn.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
    btn.disabled = true;

    try {
        const docRef = doc(db, "config", "pass");
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
            const realPass = docSnap.data().service_pay_adminn; 

            if (String(passInput) === String(realPass)) {
                const container = document.getElementById("secure-app-root");
                container.innerHTML = SECURE_DASHBOARD_HTML;
                
                document.getElementById("loginOverlay").style.opacity = '0';
                setTimeout(() => {
                    document.getElementById("loginOverlay").style.display = "none";
                    container.classList.add("visible");
                    window.loadData();
                }, 500);

                const Toast = Swal.mixin({
                    toast: true, position: 'top-end', showConfirmButton: false, timer: 3000, timerProgressBar: true
                });
                Toast.fire({ icon: 'success', title: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„' });

            } else {
                Swal.fire('Ø®Ø·Ø£', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
                document.getElementById("adminPass").value = '';
            }
        } else {
            Swal.fire('Ø®Ø·Ø£', 'ØªØ¹Ø°Ø± Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
        }
    } catch (error) {
        console.error(error);
        Swal.fire('Ø®Ø·Ø£', 'Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ' + error.message, 'error');
    } finally {
        btn.innerHTML = oldText;
        btn.disabled = false;
    }
};

document.getElementById("adminPass").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        event.preventDefault();
        window.verifyAdminLogin();
    }
});

// 2. Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ÙÙ„ØªØ±Ø© ÙˆØ§Ù„ØµÙØ­Ø§Øª
window.loadData = async function() {
  const tbody = document.getElementById("tableBody");
  if(!tbody) return;
  tbody.innerHTML = '<tr><td colspan="8" style="text-align:center; padding:30px; color:var(--primary-color);"><i class="fas fa-circle-notch fa-spin fa-2x"></i><br>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</td></tr>';
  
  try {
    const response = await fetch(scriptURL + "?action=read_all");
    const result = await response.json();

    if(result.status === "success") {
      allData = result.data;
      window.updateStats(allData);
      window.applyFilters(); // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    } else {
      tbody.innerHTML = `<tr><td colspan="8" style="text-align:center; color:red;">Ø®Ø·Ø£: ${result.message}</td></tr>`;
    }
  } catch (error) {
    console.error(error);
    tbody.innerHTML = '<tr><td colspan="8" style="text-align:center; color:red;">ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</td></tr>';
  }
};

window.applyFilters = function() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    const statusFilter = document.getElementById("statusFilter").value;
    
    // Ø¬Ù„Ø¨ Ù‚ÙŠÙ… Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    const fLevel = document.getElementById("filter_level").value;
    const fDaaira = document.getElementById("filter_daaira").value;
    const fBaladiya = document.getElementById("filter_baladiya").value;
    const fSchool = document.getElementById("filter_school").value;

    filteredData = allData.filter(row => {
        // 1. Ø¨Ø­Ø« Ø§Ù„Ù†Øµ
        const matchesSearch = (
            (row.fmn && row.fmn.includes(query)) ||
            (row.frn && row.frn.includes(query)) ||
            (row.ccp && String(row.ccp).includes(query)) ||
            (row.phone && String(row.phone).replace(/\s/g,'').includes(query)) || 
            (row.schoolName && row.schoolName.includes(query))
        );

        // 2. ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„Ø© (Ù…Ø¤ÙƒØ¯/ØºÙŠØ± Ù…Ø¤ÙƒØ¯)
        let matchesStatus = true;
        const isConfirmed = String(row.confirmed).toLowerCase() === "true";
        if (statusFilter === "confirmed") {
            matchesStatus = isConfirmed;
        } else if (statusFilter === "pending") {
            matchesStatus = !isConfirmed;
        }

        // 3. ğŸ†• Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ø§Ù„Ø·ÙˆØ±ØŒ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©ØŒ Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©ØŒ Ø§Ù„Ù…Ø¤Ø³Ø³Ø©)
        // Ø§Ù„ØªØ­Ù‚Ù‚ ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙÙ„ØªØ± Ù„Ù‡ Ù‚ÙŠÙ…Ø© (Ù„ÙŠØ³ ÙØ§Ø±ØºØ§Ù‹)
        const matchesLevel = fLevel === "" || row.level === fLevel;
        const matchesDaaira = fDaaira === "" || row.daaira === fDaaira;
        const matchesBaladiya = fBaladiya === "" || row.baladiya === fBaladiya;
        const matchesSchool = fSchool === "" || row.schoolName === fSchool;

        return matchesSearch && matchesStatus && matchesLevel && matchesDaaira && matchesBaladiya && matchesSchool;
    });

    currentPage = 1;
    window.renderCurrentPage();
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ„ØªØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - Ù„ÙŠØ¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ÙÙ„ØªØ±Ø©)
    // window.updateStats(filteredData); // ÙŠÙ…ÙƒÙ†Ùƒ ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØªØºÙŠØ± Ù…Ø¹ Ø§Ù„ÙÙ„ØªØ±
};

window.renderCurrentPage = function() {
    const totalItems = filteredData.length;
    const totalPages = Math.ceil(totalItems / rowsPerPage);
    
    if (currentPage < 1) currentPage = 1;
    if (currentPage > totalPages && totalPages > 0) currentPage = totalPages;

    const start = (currentPage - 1) * rowsPerPage;
    const end = start + rowsPerPage;
    const pageData = filteredData.slice(start, end);

    window.renderTable(pageData);
    window.updatePaginationUI(totalPages);
};

window.changePage = function(direction) {
    currentPage += direction;
    window.renderCurrentPage();
};

window.updatePaginationUI = function(totalPages) {
    const controls = document.getElementById("paginationControls");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const pageInfo = document.getElementById("pageInfo");

    if (totalPages <= 1 && filteredData.length > 0) {
         controls.style.display = "none";
    } else if (filteredData.length === 0) {
         controls.style.display = "none";
    } else {
         controls.style.display = "flex";
    }

    pageInfo.innerText = `ØµÙØ­Ø© ${currentPage} Ù…Ù† ${totalPages || 1}`;
    prevBtn.disabled = currentPage === 1;
    nextBtn.disabled = currentPage === totalPages || totalPages === 0;
};

window.renderTable = function(data) {
  const tbody = document.getElementById("tableBody");
  tbody.innerHTML = "";

  if(data.length === 0) {
    tbody.innerHTML = '<tr><td colspan="8" style="text-align:center; padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«</td></tr>';
    return;
  }

  data.forEach((row) => {
    const originalIndex = allData.findIndex(item => item.ccp === row.ccp);
    const isConfirmed = String(row.confirmed).toLowerCase() === "true";
    const statusBadge = isConfirmed 
      ? `<span class="badge badge-confirmed"><i class="fas fa-check"></i> Ù…Ø¤ÙƒØ¯</span>` 
      : `<span class="badge badge-pending"><i class="fas fa-clock"></i> ØºÙŠØ± Ù…Ø¤ÙƒØ¯</span>`;

    let dateStr = window.fmtDate(row.date_edit);

    const gradeJobHtml = `
      <div class="grade-job-cell">
        <span class="job-text">${row.job || ''}</span>
        <span class="grade-text">${row.gr || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>
      </div>
    `;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td style="font-weight:700; font-family:'Cairo';">${row.ccp}</td>
      <td>${row.fmn} ${row.frn}</td>
      <td>${gradeJobHtml}</td>
      <td>${row.schoolName || '-'}</td>
      <td style="direction:ltr; text-align:right;">${row.phone}</td>
      <td>${statusBadge}</td>
      <td style="font-size:12px; font-weight:600;">${dateStr}</td>
      <td>
        <div class="actions-cell">
          <button class="action-btn btn-view" onclick="window.viewDetails(${originalIndex})" title="Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„"><i class="fas fa-eye"></i></button>
          <button class="action-btn btn-edit" onclick="window.openEditModal(${originalIndex})" title="ØªØ¹Ø¯ÙŠÙ„"><i class="fas fa-pen-to-square"></i></button>
          <button class="action-btn btn-print" onclick="window.printForm(${originalIndex})" title="Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©" style="background-color: #6a11cb;"><i class="fas fa-file-invoice"></i></button>
          <button class="action-btn btn-delete" onclick="window.deleteUser('${row.ccp}')" title="Ø­Ø°Ù"><i class="fas fa-trash-can"></i></button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });
};

// Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ...
window.saveToFirebaseDB = function(formData) {
    Swal.fire({ title: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸ ÙÙŠ Firestore...', didOpen: () => Swal.showLoading() });

    const specificData = {
        adm: formData.adm || "",
        ass: formData.ass || "",
        ccp: formData.ccp || "",
        diz: formData.diz ? new Date(formData.diz) : null,
        fmn: formData.fmn || "",
        frn: formData.frn || "",
        gr: formData.gr || "",
        mtr: formData.mtr || "",
        updated_at: new Date()
    };

    const docRef = doc(db, "employeescompay", formData.ccp);

    setDoc(docRef, specificData)
    .then(() => { Swal.fire('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©', 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ employeescompay', 'success'); })
    .catch((error) => { Swal.fire('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: ' + error.message, 'error'); });
};

window.downloadExcel = async function() {
  Swal.fire({
    title: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ù…Ù„Ù Excel...',
    html: 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŒ ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ´ÙÙŠØ± Ø§Ù„Ù…Ù„Ù.',
    allowOutsideClick: false,
    didOpen: () => { Swal.showLoading(); }
  });

  try {
    const response = await fetch(scriptURL + "?action=export_excel");
    const result = await response.json();

    if (result.status === "success") {
      const byteCharacters = atob(result.data);
      const byteNumbers = new Array(byteCharacters.length);
      for (let i = 0; i < byteCharacters.length; i++) {
        byteNumbers[i] = byteCharacters.charCodeAt(i);
      }
      const byteArray = new Uint8Array(byteNumbers);
      const blob = new Blob([byteArray], {type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});
      
      const link = document.createElement('a');
      link.href = window.URL.createObjectURL(blob);
      link.download = result.filename;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      Swal.fire({icon: 'success', title: 'ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„', timer: 2000, showConfirmButton: false});
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    Swal.fire({icon: 'error', title: 'Ø®Ø·Ø£', text: 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Excel: ' + error.message});
  }
};

window.updateStats = function(data) {
  const total = data.length;
  const confirmed = data.filter(r => String(r.confirmed).toLowerCase() === "true").length;
  document.getElementById("totalCount").innerText = total;
  document.getElementById("confirmedCount").innerText = confirmed;
  document.getElementById("pendingCount").innerText = total - confirmed;
};

window.viewDetails = function(index) {
    const d = allData[index];
    const getDisplayDate = (dateVal) => {
        if (!dateVal) return "---";
        if (typeof dateVal === 'string' && dateVal.includes('T')) return window.fmtDateTime(dateVal);
        if (typeof dateVal === 'string') return dateVal;
        const formatted = window.fmtDateTime(dateVal);
        return formatted !== "-" ? formatted : dateVal;
    };

    const regDate = getDisplayDate(d.date);
    const editDate = getDisplayDate(d.date_edit);
    const isConfirmed = String(d.confirmed).toLowerCase() === "true";
    const confirmDate = isConfirmed ? getDisplayDate(d.date_confirm) : '---';
    const confirmerName = d.confirmed_by ? d.confirmed_by : '---';
    const confirmerPhone = d.reviewer_phone ? d.reviewer_phone : '---';

    const statusHtml = isConfirmed 
        ? '<span style="color:var(--success-color); font-weight:bold;">âœ… Ù…Ø¤ÙƒØ¯</span>' 
        : '<span style="color:var(--warning-color); font-weight:bold;">â³ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>';

    Swal.fire({
        title: '',
        width: '600px',
        html: `
            <div class="info-card-container">
                <div class="info-header">
                    <div class="info-avatar">${d.frn ? d.frn.charAt(0) : '?'}</div>
                    <div class="info-title">
                        <h3>${d.fmn} ${d.frn}</h3>
                        <span>CCP: ${d.ccp}</span>
                    </div>
                    <div style="margin-right:auto;">${statusHtml}</div>
                </div>
                <div class="info-grid">
                    <div class="info-item"><span class="info-label">NIN</span><span class="info-value">${d.nin || '--'}</span></div>
                    <div class="info-item"><span class="info-label">Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</span><span class="info-value">${d.ass || '--'}</span></div>
                    <div class="info-item"><span class="info-label">Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</span><span class="info-value">${String(d.diz).replace(/'/g, '') || '--'}</span></div>
                    <div class="info-item"><span class="info-label">Ø§Ù„Ù‡Ø§ØªÙ</span><span class="info-value" dir="ltr">${d.phone}</span></div>
                </div>
                <div class="info-grid">
                    <div class="info-item full-width"><span class="info-label">Ø§Ù„ÙˆØ¸ÙŠÙØ©</span><span class="info-value">${d.job || ''} - ${d.gr}</span></div>
                    <div class="info-item full-width"><span class="info-label">Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</span><span class="info-value">${d.schoolName} (${d.daaira}/${d.baladiya})</span></div>
                </div>
                ${isConfirmed ? `
                <div style="margin-top:15px; border-top:1px dashed #ddd; padding-top:10px;">
                    <div style="font-size:12px; font-weight:bold; color:#28a745; margin-bottom:5px;">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</div>
                    <div class="info-grid">
                        <div class="info-item"><span class="info-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø¤ÙƒØ¯</span><span class="info-value">${confirmerName}</span></div>
                        <div class="info-item"><span class="info-label">Ø±Ù‚Ù… Ø§Ù„Ù…Ø¤ÙƒØ¯</span><span class="info-value" dir="ltr">${confirmerPhone}</span></div>
                    </div>
                </div>` : ''}
                <div class="dates-section">
                    <div class="date-box"><span class="date-label">Ø§Ù„ØªØ³Ø¬ÙŠÙ„</span><span class="date-val">${regDate}</span></div>
                    <div class="date-box"><span class="date-label">Ø¢Ø®Ø± ØªØ¹Ø¯ÙŠÙ„</span><span class="date-val">${editDate}</span></div>
                    <div class="date-box"><span class="date-label">Ø§Ù„ØªØ£ÙƒÙŠØ¯</span><span class="date-val">${confirmDate}</span></div>
                </div>
            </div>
        `,
        showConfirmButton: true,
        confirmButtonText: 'Ø¥ØºÙ„Ø§Ù‚',
    });
};

window.openFirebaseModal = function() {
  Swal.fire({
    title: 'Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
    width: '800px',
    customClass: 'swal-wide',
    html: window.getFirebaseFormHtml(),
    showCancelButton: true,
    confirmButtonText: 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¸Ù',
    cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡',
    confirmButtonColor: '#ffca28',
    focusConfirm: false,
    didOpen: () => {
        document.querySelector('.swal2-confirm').style.color = '#333';
    },
    preConfirm: () => {
        return {
            ccp: document.getElementById('inp_ccp').value,
            ass: document.getElementById('inp_ass').value,
            fmn: document.getElementById('inp_fmn').value,
            frn: document.getElementById('inp_frn').value,
            diz: document.getElementById('inp_diz').value,
            gr: document.getElementById('inp_gr').value,
            mtr: document.getElementById('inp_mtr').value,
            adm: document.getElementById('inp_adm').value
        };
    }
  }).then((res) => {
    if(res.isConfirmed) {
         window.saveToFirebaseDB(res.value);
    }
  });
};

window.openAddModal = function() {
  Swal.fire({
    title: 'ØªØ³Ø¬ÙŠÙ„ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯',
    width: '800px',
    customClass: 'swal-wide',
    html: window.getFormHtml({}, true),
    showCancelButton: true,
    confirmButtonText: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù',
    cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡',
    confirmButtonColor: '#2a9d8f',
    focusConfirm: false,
    preConfirm: () => window.getFormDataFromModal()
  }).then((res) => {
    if(res.isConfirmed) {
      window.handleSave(res.value, "register");
    }
  });
};

window.openDirectRegister = function() {
    // 1. Ø§Ù„Ø±Ø§Ø¨Ø· Ù†Ø¸ÙŠÙ ØªÙ…Ø§Ù…Ø§Ù‹ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø£ÙƒÙˆØ§Ø¯
    const targetUrl = "https://de-touggourt.github.io/service-paiement-nin/";
    
    // 2. ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙˆØ­ÙØ¸ Ù…Ø±Ø¬Ø¹ Ù„Ù‡Ø§
    const popup = window.open(targetUrl, '_blank');
    
    // 3. Ø¥Ø±Ø³Ø§Ù„ "Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ" Ø¹Ø¨Ø± Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ù…ØªØµÙØ­
    // Ù†Ø±Ø³Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙƒÙ„ Ù†ØµÙ Ø«Ø§Ù†ÙŠØ© Ù„Ù…Ø¯Ø© 5 Ø«ÙˆØ§Ù†Ù Ù„Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø¯ Ø§ÙƒØªÙ…Ù„ ØªØ­Ù…ÙŠÙ„Ù‡Ø§ ÙˆØ§Ø³ØªÙ„Ù…Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    let attempts = 0;
    const interval = setInterval(() => {
        // "Dir55@tggt" Ù‡Ùˆ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø°ÙŠ Ø³Ù†Ø±Ø³Ù„Ù‡
        // Ø§Ù„Ù†Ø¬Ù…Ø© "*" ØªØ¹Ù†ÙŠ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø£ÙŠ Ù†Ø·Ø§Ù‚ (ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø¨Ø¯Ù‚Ø© Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ù…Ø§Ù†)
        popup.postMessage("AUTH_Dir55@tggt", "*"); 
        
        attempts++;
        if (attempts > 10) clearInterval(interval); // Ø§Ù„ØªÙˆÙ‚Ù Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
    }, 500);
};

window.openEditModal = function(index) {
  const d = allData[index];
  
  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª
  const getFormattedDate = () => {
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
  };

  Swal.fire({
    title: 'ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù',
    width: '800px',
    customClass: 'swal-wide',
    html: window.getFormHtml(d, false), 
    showCancelButton: true,
    confirmButtonText: 'Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª',
    cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡',
    confirmButtonColor: '#4361ee',
    focusConfirm: false,
    didOpen: () => {
        window.initModalData(d);
    },
    preConfirm: () => {
        // 1. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        let formData = window.getFormDataFromModal();

        // =========================================================
        // 1ï¸âƒ£ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ÙØ§Ø±ØºØ© (Empty Fields Check)
        // =========================================================
        
        // Ø®Ø±ÙŠØ·Ø© Ù„Ø±Ø¨Ø· Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø¨Ø£Ø³Ù…Ø§Ø¦Ù‡Ø§ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø¹Ø±Ø¶
        const requiredFields = {
            ccp: 'Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ (CCP)',
            ass: 'Ø±Ù‚Ù… Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ (ASS)',
            fmn: 'Ø§Ù„Ù„Ù‚Ø¨',
            frn: 'Ø§Ù„Ø§Ø³Ù…',
            diz: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯',
            nin: 'Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ·Ù†ÙŠ (NIN)',
            gr: 'Ø§Ù„Ø±ØªØ¨Ø©',
            job: 'Ø§Ù„ÙˆØ¸ÙŠÙØ©',
            adm: 'Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (ADM)',
            mtr: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ (MTR)',
            level: 'Ø§Ù„Ø·ÙˆØ±',
            daaira: 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©',
            baladiya: 'Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©',
            schoolName: 'Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø¹Ù…Ù„',
            phone: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'
        };

        // Ø­Ù„Ù‚Ø© ØªÙƒØ±Ø§Ø±ÙŠØ© Ù„ÙØ­Øµ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„
        for (const [key, label] of Object.entries(requiredFields)) {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ…Ø© ÙØ§Ø±ØºØ© Ø£Ùˆ ØªØ­ØªÙˆÙŠ Ù…Ø³Ø§ÙØ§Øª ÙÙ‚Ø·
            if (!formData[key] || formData[key].toString().trim() === '') {
                Swal.showValidationMessage(`âš ï¸ Ø§Ù„Ø­Ù‚Ù„ "${label}" Ø¥Ø¬Ø¨Ø§Ø±ÙŠ ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹.`);
                return false; // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
            }
        }

        // =========================================================
        // 2ï¸âƒ£ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ (Format Validation)
        // =========================================================

        // Ø£) Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† CCP Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·
        if (!/^\d+$/.test(formData.ccp)) {
            Swal.showValidationMessage('âš ï¸ Ø±Ù‚Ù… CCP ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·.');
            return false;
        }

        // Ø¨) Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ (10 Ø£Ø±Ù‚Ø§Ù…ØŒ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 05/06/07)
        const phoneRegex = /^(05|06|07)[0-9]{8}$/;
        if (!phoneRegex.test(String(formData.phone).replace(/\s/g, ''))) {
            Swal.showValidationMessage('âš ï¸ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 10 Ø£Ø±Ù‚Ø§Ù… ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 05, 06, 07).');
            return false;
        }

        // Ø¬) Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† NIN (18 Ø±Ù‚Ù…)
        if (!/^\d{18}$/.test(formData.nin)) {
            Swal.showValidationMessage(`âš ï¸ Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ·Ù†ÙŠ (NIN) ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ù…Ù† 18 Ø±Ù‚Ù…Ù‹Ø§ (Ø§Ù„Ù…ÙØ¯Ø®Ù„: ${formData.nin.length}).`);
            return false;
        }

        // Ø¯) Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ASS (12 Ø±Ù‚Ù…)
        if (!/^\d{12}$/.test(formData.ass)) {
            Swal.showValidationMessage(`âš ï¸ Ø±Ù‚Ù… Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ (ASS) ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ù…Ù† 12 Ø±Ù‚Ù…Ù‹Ø§ (Ø§Ù„Ù…ÙØ¯Ø®Ù„: ${formData.ass.length}).`);
            return false;
        }

        // =========================================================
        // 3ï¸âƒ£ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­ÙØ¸ (Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ­Ù‚Ù‚)
        // =========================================================
        
        const currentDateTime = getFormattedDate();

        // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
        formData.date_edit = currentDateTime; 
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ø§Ø¨ØªØ© Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„
        formData.confirmed_by = "Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø±ÙˆØ§ØªØ¨";
        formData.reviewer_phone = "0662340604"; 

        // Ù…Ù†Ø·Ù‚ ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ£ÙƒÙŠØ¯
        if (formData.confirmed === "true") {
            formData.date_confirm = currentDateTime;
        } else {
            formData.date_confirm = ""; 
        }
        
        return formData;
    }
  }).then((res) => {
    if(res.isConfirmed) {
      window.handleSave(res.value, "update_admin");
    }
  });
};

window.deleteUser = function(ccp) {
  Swal.fire({
    title: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù',
    text: `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨ ${ccp}ØŸ`,
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#e63946',
    cancelButtonColor: '#6c757d',
    confirmButtonText: 'Ù†Ø¹Ù…ØŒ Ø­Ø°Ù',
    cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡'
  }).then(async (result) => {
    if (result.isConfirmed) {
      Swal.fire({title: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...', didOpen:()=>Swal.showLoading()});
      try {
        const formData = new URLSearchParams();
        formData.append("action", "delete");
        formData.append("ccp", ccp);
        const res = await fetch(scriptURL, { method: "POST", body: formData });
        const json = await res.json();
        if(json.result === "success") {
          Swal.fire("ØªÙ… Ø§Ù„Ø­Ø°Ù", "ØªÙ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ø¨Ù†Ø¬Ø§Ø­", "success");
          window.loadData();
        } else {
          Swal.fire("Ø®Ø·Ø£", json.message, "error");
        }
      } catch(e) {
        Swal.fire("Ø®Ø·Ø£", "ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„", "error");
      }
    }
  });
};

window.handleSave = async function(data, actionType) {
    Swal.fire({
        title: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...',
        text: 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø¨ÙŠÙ†Ù…Ø§ ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨',
        didOpen: () => Swal.showLoading(),
        allowOutsideClick: false
    });

    const p = new URLSearchParams();
    p.append("action", actionType);
    for(let key in data) {
        p.append(key, data[key]);
    }

    try {
        const req = await fetch(scriptURL, { method: "POST", body: p });
        const json = await req.json();
        
        if(json.result === "success") {
            Swal.fire({icon: 'success', title: 'ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', text: json.message, timer: 2000});
            window.loadData(); 
        } else {
            Swal.fire("Ø®Ø·Ø£", json.message || "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ", "error");
        }
    } catch(e) { 
        Swal.fire("Ø®Ø·Ø£", "ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±", "error"); 
    }
};

window.updBalAdmin = function() {
  const d = document.getElementById("inp_daaira").value;
  const b = document.getElementById("inp_baladiya");
  b.innerHTML = '<option value="">-- Ø§Ø®ØªØ± --</option>';
  if(d && baladiyaMap[d]) {
    baladiyaMap[d].forEach(o => {
      let op = document.createElement("option");
      op.text = o; op.value = o; b.add(op);
    });
  }
};

// --- (NEW) Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ø·ÙˆØ± ---
window.handleLevelChange = function() {
    const level = document.getElementById("inp_level").value;
    const daairaSelect = document.getElementById("inp_daaira");
    const baladiyaSelect = document.getElementById("inp_baladiya");
    
    if (level === "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©") {
        daairaSelect.value = "ØªÙˆÙ‚Ø±Øª";
        daairaSelect.disabled = true;
        
        window.updBalAdmin(); 
        
        baladiyaSelect.value = "ØªÙˆÙ‚Ø±Øª";
        baladiyaSelect.disabled = true;
        
        const area = document.getElementById("institutionArea");
        area.innerHTML = `
            <input id="inp_school" value="Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª" readonly 
            style="width:100%; padding:12px; border:1px solid #dee2e6; border-radius:10px; background:#e9ecef; color:#495057; font-weight:bold;">
        `;
    } else {
        daairaSelect.disabled = false;
        baladiyaSelect.disabled = false;
        window.updateWorkPlaceAdmin();
    }
};

// --- (UPDATED) ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„ ---
window.updateWorkPlaceAdmin = function() {
  const l = document.getElementById("inp_level").value;
  
  if (l === "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©") return; 

  const d = document.getElementById("inp_daaira").value;
  const b = document.getElementById("inp_baladiya").value;
  const area = document.getElementById("institutionArea");
  
  area.innerHTML = ''; 
  
  const mkSel = (lst) => {
    if (!lst || lst.length === 0) {
        area.innerHTML = '<input id="inp_school" placeholder="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©" readonly style="width:100%; padding:12px; border:1px solid #dee2e6; border-radius:10px; background:#fff3cd;">';
        return;
    }
    let s = document.createElement("select");
    s.id = "inp_school";
    s.innerHTML = '<option value="">-- Ø§Ø®ØªØ± --</option>';
    lst.forEach(i => { let o = document.createElement("option"); o.text = i.name; o.value = i.name; s.add(o); });
    s.style.width = "100%"; s.style.padding = "12px"; s.style.border = "1px solid #dee2e6"; s.style.borderRadius = "10px";
    area.appendChild(s);
  };
  
  // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙˆØ¡Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ø®Ø±
  if(l === 'Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ') {
     if(b && primarySchoolsByBaladiya) mkSel(primarySchoolsByBaladiya[b] || []);
     else area.innerHTML = '<input id="inp_school" placeholder="Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹" readonly style="width:100%; padding:12px; border:1px solid #dee2e6; border-radius:10px; background:#e9ecef;">';
  }
  else if(l === 'Ù…ØªÙˆØ³Ø·' || l === 'Ø«Ø§Ù†ÙˆÙŠ') {
      if(d && institutionsByDaaira && institutionsByDaaira[d]) mkSel(institutionsByDaaira[d][l] || []);
      else area.innerHTML = '<input id="inp_school" placeholder="Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø£ÙˆÙ„Ø§Ù‹" readonly style="width:100%; padding:12px; border:1px solid #dee2e6; border-radius:10px; background:#e9ecef;">';
  }
  else {
      area.innerHTML = '<input id="inp_school" placeholder="Ø§Ø®ØªØ± Ø§Ù„Ø·ÙˆØ± ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø© Ø£ÙˆÙ„Ø§Ù‹" readonly style="width:100%; padding:12px; border:1px solid #dee2e6; border-radius:10px; background:#e9ecef;">';
  }
};

window.initModalData = function(d) {
    if(!d) return;
    
    if (d.level === "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©") {
        window.handleLevelChange();
        return;
    }

    if(d.daaira) {
        window.updBalAdmin();
        setTimeout(() => {
            const balSelect = document.getElementById("inp_baladiya");
            if(balSelect) balSelect.value = d.baladiya;
            
            window.updateWorkPlaceAdmin();
            
            setTimeout(() => {
                const schoolSelect = document.getElementById("inp_school");
                if(schoolSelect) schoolSelect.value = d.schoolName;
            }, 50);
        }, 50);
    }
};

window.getFirebaseFormHtml = function() {
  return `
      <div class="edit-form-wrapper">
        <div class="form-section-title"><i class="fas fa-database"></i> Ø¨ÙŠØ§Ù†Ø§Øª Database Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</div>
        <div class="edit-form-grid">
            <div class="edit-form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ (CCP)</label><input id="inp_ccp" placeholder="10 Ø£Ø±Ù‚Ø§Ù…"></div>
            <div class="edit-form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ (ASS)</label><input id="inp_ass" placeholder="12 Ø±Ù‚Ù…"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ù„Ù‚Ø¨ (FMN)</label><input id="inp_fmn" placeholder="Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ø§Ø³Ù… (FRN)</label><input id="inp_frn" placeholder="Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"></div>
            <div class="edit-form-group"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ (DIZ)</label><input type="date" id="inp_diz"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ø±ØªØ¨Ø© (GR)</label><input id="inp_gr" placeholder="Code"></div>
            <div class="edit-form-group"><label>Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (ADM)</label><input id="inp_adm" value="1" placeholder="Ø£Ø±Ù‚Ø§Ù… ÙˆØ­Ø±ÙˆÙ"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ (MTR)</label><input id="inp_mtr" placeholder="Ø£Ø±Ù‚Ø§Ù… ÙˆØ­Ø±ÙˆÙ"></div>
        </div>
      </div>`;
};

window.getFormHtml = function(d, isAddMode) {
  const val = (k) => d[k] || '';
  const isConfirmed = String(d.confirmed) === "true";
  let daairaOptions = '<option value="">-- Ø§Ø®ØªØ± --</option>';
  ["ØªÙˆÙ‚Ø±Øª", "ØªÙ…Ø§Ø³ÙŠÙ†", "Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†", "Ø§Ù„Ø­Ø¬ÙŠØ±Ø©", "Ø§Ù„Ø·ÙŠØ¨Ø§Øª"].forEach(daaira => {
     daairaOptions += `<option value="${daaira}" ${val('daaira') === daaira ? 'selected' : ''}>${daaira}</option>`;
  });

  return `
      <div class="edit-form-wrapper">
        <div class="form-section-title"><i class="fas fa-address-card"></i> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆÙŠØ©</div>
        <div class="edit-form-grid">
            <div class="edit-form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ (CCP)</label><input id="inp_ccp" value="${val('ccp')}" ${!isAddMode ? 'readonly class="readonly-input"' : ''} placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… CCP"></div>
            <div class="edit-form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</label><input id="inp_ass" value="${val('ass')}" placeholder="SSN"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ù„Ù‚Ø¨ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</label><input id="inp_fmn" value="${val('fmn')}" placeholder="Ø§Ù„Ù„Ù‚Ø¨"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ø§Ø³Ù… (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</label><input id="inp_frn" value="${val('frn')}" placeholder="Ø§Ù„Ø§Ø³Ù…"></div>
            <div class="edit-form-group"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label><input type="date" id="inp_diz" value="${window.formatDateForInput(val('diz'))}"></div>
            <div class="edit-form-group"><label>Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ·Ù†ÙŠ (NIN)</label><input id="inp_nin" value="${val('nin')}" maxlength="18" placeholder="18 Ø±Ù‚Ù…"></div>
        </div>

        <div class="form-section-title"><i class="fas fa-briefcase"></i> Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</div>
        <div class="edit-form-grid">
            <div class="edit-form-group"><label>Ø§Ù„ÙˆØ¸ÙŠÙØ©</label><input id="inp_job" value="${val('job')}" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø³ØªØ§Ø°..."></div>
            <div class="edit-form-group"><label>Ø§Ù„Ø±ØªØ¨Ø© (Ø§Ù„ÙƒÙˆØ¯)</label><input id="inp_gr" value="${val('gr')}" placeholder="Ù…Ø«Ø§Ù„: 12/2"></div>
            
            <div class="edit-form-group"><label>Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (ADM)</label><input id="inp_adm" value="${val('adm')}" placeholder="Code Admin"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ (MTR)</label><input id="inp_mtr" value="${val('mtr')}" placeholder="Matricule"></div>
            <div class="edit-form-group"><label>Ø§Ù„Ø·ÙˆØ±</label>
                <select id="inp_level" onchange="window.handleLevelChange()">
                    <option value="">-- Ø§Ø®ØªØ± --</option>
                    <option value="Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ" ${val('level') === 'Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ' ? 'selected' : ''}>Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
                    <option value="Ù…ØªÙˆØ³Ø·" ${val('level') === 'Ù…ØªÙˆØ³Ø·' ? 'selected' : ''}>Ù…ØªÙˆØ³Ø·</option>
                    <option value="Ø«Ø§Ù†ÙˆÙŠ" ${val('level') === 'Ø«Ø§Ù†ÙˆÙŠ' ? 'selected' : ''}>Ø«Ø§Ù†ÙˆÙŠ</option>
                    <option value="Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©" ${val('level') === 'Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©' ? 'selected' : ''}>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©</option>
                </select>
            </div>
             <div class="edit-form-group"><label>Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©</label>
                <select id="inp_daaira" onchange="window.updBalAdmin(); window.updateWorkPlaceAdmin()">${daairaOptions}</select>
            </div>
            <div class="edit-form-group full-width"><label>Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</label>
                <select id="inp_baladiya" onchange="window.updateWorkPlaceAdmin()"><option value="">-- Ø§Ø®ØªØ± --</option></select>
            </div>
            <div class="edit-form-group full-width"><label>Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø¹Ù…Ù„</label>
                <div id="institutionArea"><input id="inp_school" value="${val('schoolName')}" readonly style="width:100%; padding:12px; border:1px solid #dee2e6; border-radius:10px; background:#e9ecef;"></div>
            </div>
        </div>

        <div class="form-section-title"><i class="fas fa-phone-volume"></i> Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ø­Ø§Ù„Ø©</div>
        <div class="edit-form-grid">
            <div class="edit-form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label><input id="inp_phone" value="${val('phone')}" dir="ltr" placeholder="06xxxxxxxx"></div>
            <div class="edit-form-group"><label>Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù„Ù</label>
                <select id="inp_confirmed" style="background:${isConfirmed?'#e8f5e9':'#fff3e0'}">
                    <option value="true" ${isConfirmed ? "selected" : ""}>Ù…Ø¤ÙƒØ¯ âœ…</option>
                    <option value="false" ${!isConfirmed ? "selected" : ""}>ØºÙŠØ± Ù…Ø¤ÙƒØ¯ â³</option>
                </select>
            </div>
        </div>
      </div>`;
};
window.getFormDataFromModal = function() {
    return {
        ccp: document.getElementById('inp_ccp').value,
        ass: document.getElementById('inp_ass').value,
        fmn: document.getElementById('inp_fmn').value,
        frn: document.getElementById('inp_frn').value,
        diz: document.getElementById('inp_diz').value,
        nin: document.getElementById('inp_nin').value,
        gr: document.getElementById('inp_gr').value,
        job: document.getElementById('inp_job').value,
        
        // Ø¬Ù„Ø¨ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        adm: document.getElementById('inp_adm').value,
        mtr: document.getElementById('inp_mtr').value,

        level: document.getElementById('inp_level').value,
        daaira: document.getElementById('inp_daaira').value,
        baladiya: document.getElementById('inp_baladiya').value,
        schoolName: document.getElementById('inp_school').value,
        phone: document.getElementById('inp_phone').value,
        confirmed: document.getElementById('inp_confirmed').value
    };
};


window.fmtDate = function(d) {
    if(!d) return "-";
    const date = new Date(d);
    if(isNaN(date.getTime())) return "-";
    return date.toLocaleDateString('en-GB'); 
};

window.fmtDateTime = function(d) {
    if(!d) return "-";
    const date = new Date(d);
    if(isNaN(date.getTime())) return "-";
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const year = date.getFullYear();
    const h = String(date.getHours()).padStart(2, '0');
    const m = String(date.getMinutes()).padStart(2, '0');
    const s = String(date.getSeconds()).padStart(2, '0');
    return `${day}-${month}-${year} ${h}:${m}:${s}`;
};

window.formatDateForInput = function(d) {
    if (!d) return "";
    try {
        const date = new Date(d);
        if(isNaN(date)) return "";
        return date.toISOString().split('T')[0];
    } catch(e) { return ""; }
};

// ==========================================
// ğŸ†• Ù…ÙŠØ²Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯Ø© (ØªØ­Ø¯ÙŠØ«: Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªØ§Ø±ÙŠØ® + Ø­Ø°Ù Ø§Ù„Ø±ØªØ¨Ø©)
// ==========================================

window.openPendingListModal = function() {
    // 1. Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ù…Ø¤ÙƒØ¯
    const schoolConfirmerMap = {};
    allData.forEach(row => {
        const isConf = String(row.confirmed).toLowerCase() === "true";
        if (isConf && row.schoolName && row.confirmed_by) {
            schoolConfirmerMap[row.schoolName] = {
                name: row.confirmed_by,
                phone: row.reviewer_phone || ''
            };
        }
    });

    // 2. ØªØµÙÙŠØ© (ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯Ø© ÙÙ‚Ø·)
    let pendingList = allData.filter(row => String(row.confirmed).toLowerCase() !== "true");

    // 3. Ø§Ù„ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„
    pendingList.sort((a, b) => {
        const schoolA = a.schoolName || "";
        const schoolB = b.schoolName || "";
        return schoolA.localeCompare(schoolB, "ar");
    });

    if (pendingList.length === 0) {
        Swal.fire('ØªÙ†Ø¨ÙŠÙ‡', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª ØºÙŠØ± Ù…Ø¤ÙƒØ¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹', 'info');
        return;
    }

    // 4. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„
    let tableRows = pendingList.map((row, index) => {
        // --- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ù…Ø±ÙˆÙ†Ø© ---
        let regDate = '-';
        if (row.date) {
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªÙ†Ø³ÙŠÙ‚
            const formatted = window.fmtDateTime(row.date);
            // Ø¥Ø°Ø§ Ù†Ø¬Ø­ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ù†Ø³ØªØ®Ø¯Ù…Ù‡ØŒ ÙˆØ¥Ù„Ø§ Ù†Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø§Ù… ÙƒÙ…Ø§ Ø¬Ø§Ø¡ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©
            regDate = (formatted !== '-' && formatted !== 'Invalid Date') ? formatted : row.date;
        }

        const editDate = row.date_edit ? window.fmtDateTime(row.date_edit) : '-';
        
        // --- ØªØ¹Ø¯ÙŠÙ„: Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø±ØªØ¨Ø©) ---
        const jobInfo = row.job || '<span style="color:#ccc">---</span>';

        // --- Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ø¤ÙƒØ¯ ---
        let confName = row.confirmed_by;
        let confPhone = row.reviewer_phone;
        let isInferred = false;

        if (!confName && row.schoolName && schoolConfirmerMap[row.schoolName]) {
            confName = schoolConfirmerMap[row.schoolName].name;
            confPhone = schoolConfirmerMap[row.schoolName].phone;
            isInferred = true;
        }

        let confirmerDisplay = '<span style="color:#ccc; font-size:11px;">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span>';
        if (confName) {
            const styleColor = isInferred ? 'color:#666; font-style:italic;' : 'color:#000; font-weight:bold;';
            const icon = isInferred ? '<i class="fas fa-magic" title="Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø¢Ù„ÙŠ" style="color:#ffc107; margin-left:3px;"></i>' : '';
            confirmerDisplay = `
                <div style="${styleColor}">${icon}${confName}</div>
                <div style="direction:ltr; font-size:11px; color:#555;">${confPhone || ''}</div>
            `;
        }

        return `
            <tr style="border-bottom:1px solid #eee;">
                <td style="padding:10px;">${index + 1}</td>
                <td style="padding:10px; font-weight:bold; color:#2b2d42;">${row.fmn} ${row.frn}</td>
                <td style="padding:10px;">${jobInfo}</td> 
                <td style="padding:10px;">${row.schoolName || '-'}</td>
                <td style="padding:10px; direction:ltr; text-align:right;">${row.phone || ''}</td>
                <td style="padding:10px; font-size:12px; direction:ltr;">${regDate}</td>
                <td style="padding:10px; font-size:12px; color:#4361ee; direction:ltr;">${editDate}</td>
                <td style="padding:10px;">${confirmerDisplay}</td>
            </tr>
        `;
    }).join('');

    const modalContent = `
        <div style="text-align:left; margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:10px;">
            <button onclick="window.printPendingList()" class="btn" style="background-color:#2b2d42; color:white;">
                Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© <i class="fas fa-print"></i>
            </button>
        </div>
        <div class="table-responsive" style="max-height:500px; overflow-y:auto; direction:rtl;">
            <table style="width:100%; border-collapse:collapse; font-size:13px; text-align:right;">
                <thead style="background:#f8f9fa; color:#495057; position:sticky; top:0; z-index:10; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                    <tr>
                        <th style="padding:12px;">Ø§Ù„Ø±Ù‚Ù…</th>
                        <th style="padding:12px;">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</th>
                        <th style="padding:12px;">Ø§Ù„ÙˆØ¸ÙŠÙØ©</th> <th style="padding:12px;">Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</th>
                        <th style="padding:12px;">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                        <th style="padding:12px;">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                        <th style="padding:12px;">Ø¢Ø®Ø± ØªØ¹Ø¯ÙŠÙ„</th>
                        <th style="padding:12px;">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤ÙƒØ¯</th>
                    </tr>
                </thead>
                <tbody>
                    ${tableRows}
                </tbody>
            </table>
        </div>
    `;

    Swal.fire({
        title: '<strong>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</strong>',
        html: modalContent,
        width: '1150px',
        showConfirmButton: false,
        showCloseButton: true,
        customClass: { popup: 'swal-wide' }
    });
};

window.printPendingList = function() {
    const schoolConfirmerMap = {};
    allData.forEach(row => {
        if (String(row.confirmed).toLowerCase() === "true" && row.schoolName && row.confirmed_by) {
            schoolConfirmerMap[row.schoolName] = {
                name: row.confirmed_by,
                phone: row.reviewer_phone || ''
            };
        }
    });

    let listToPrint = allData.filter(row => String(row.confirmed).toLowerCase() !== "true");
    listToPrint.sort((a, b) => (a.schoolName || "").localeCompare((b.schoolName || ""), "ar"));

    const printDate = new Date().toLocaleDateString('ar-DZ', { year: 'numeric', month: 'long', day: 'numeric' });
    
    let printRows = listToPrint.map((row, index) => {
        // Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‚ÙˆÙŠ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
        let regDate = '-';
        if (row.date) {
            const formatted = window.fmtDateTime(row.date);
            regDate = (formatted !== '-' && formatted !== 'Invalid Date') ? formatted : row.date;
        }
        
        const editDate = row.date_edit ? window.fmtDateTime(row.date_edit) : '-';

        let confName = row.confirmed_by;
        let confPhone = row.reviewer_phone;
        
        if (!confName && row.schoolName && schoolConfirmerMap[row.schoolName]) {
            confName = schoolConfirmerMap[row.schoolName].name;
            confPhone = schoolConfirmerMap[row.schoolName].phone;
        }

        // --- Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ø¥Ø¶Ø§ÙØ© dir="ltr" Ùˆ display:inline-block Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ---
        const confirmerStr = confName ? 
            `<span style="font-weight:bold;">${confName}</span> <br> <span dir="ltr" style="font-size:11px; color:#555; display:inline-block;">${confPhone || ''}</span>` 
            : '-';

        // Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙÙ‚Ø· Ù‡Ù†Ø§ Ø£ÙŠØ¶Ø§Ù‹
        return `
            <tr>
                <td>${index + 1}</td>
                <td style="font-weight:bold;">${row.fmn} ${row.frn}</td>
                <td>${row.job || ''}</td>
                <td>${row.schoolName || ''}</td>
               <td dir="ltr" style="text-align:center; vertical-align: middle;">${row.phone || ''}</td>

                <td dir="ltr">${regDate}</td>
                <td dir="ltr">${editDate}</td>
                <td>${confirmerStr}</td>
            </tr>
        `;
    }).join('');

    const printWindow = window.open('', '_blank');
    
    printWindow.document.write(`
        <html dir="rtl" lang="ar">
        <head>
            <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</title>
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
                @page { size: landscape; margin: 10mm; }
                body { font-family: 'Cairo', sans-serif; padding: 20px; -webkit-print-color-adjust: exact; }
                .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
                .header h3 { margin: 0; color: #444; }
                .header h2 { margin: 10px 0; text-decoration: underline; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 12px; }
                th, td { border: 1px solid #000; padding: 8px; text-align: center; vertical-align: middle; }
                th { background-color: #e0e0e0 !important; font-weight: bold; font-size: 13px; }
                .print-btn-container { text-align: center; margin-bottom: 20px; }
                .print-btn { background: #333; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-family: 'Cairo'; }
                @media print { .print-btn-container { display: none; } body { padding: 0; } }
            </style>
        </head>
        <body>
            <div class="print-btn-container">
                <button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©</button>
            </div>
            <div class="header">
                <h3>Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© Ø§Ù„Ø´Ø¹Ø¨ÙŠØ©</h3>
                <h3>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª - Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø±ÙˆØ§ØªØ¨</h3>
                <h2>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</h2>
                <p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬: ${printDate}</p>
            </div>
            <table>
                <thead>
                    <tr>
                        <th width="4%">Ø§Ù„Ø±Ù‚Ù…</th>
                        <th width="16%">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</th>
                        <th width="14%">Ø§Ù„ÙˆØ¸ÙŠÙØ©</th>
                        <th width="20%">Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</th>
                        <th width="10%">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                        <th width="12%">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                        <th width="12%">Ø¢Ø®Ø± ØªØ¹Ø¯ÙŠÙ„</th>
                        <th width="12%">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤ÙƒØ¯ (Ø¥Ù† ÙˆØ¬Ø¯)</th>
                    </tr>
                </thead>
                <tbody>
                    ${printRows}
                </tbody>
            </table>
            <div style="margin-top:20px; font-size:14px; font-weight:bold;">
                Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù„Ù„Ù…Ù„ÙØ§Øª: ${listToPrint.length}
            </div>
            <script>
                window.onload = function() { setTimeout(function() { window.print(); }, 500); }
            </script>
        </body>
        </html>
    `);
    printWindow.document.close();
};

// ==========================================
// ğŸ–¨ï¸ Ø¯Ø§Ù„Ø© Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© (ØªØµÙ…ÙŠÙ… Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„Ø£ØµÙ„)
// ==========================================
window.printForm = function(index) {
    const d = allData[index];
    
    // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
    const printDate = new Date().toLocaleDateString('ar-DZ');
    
    // ØªÙ†Ø³ÙŠÙ‚ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯
    const birthDate = d.diz ? window.fmtDate(d.diz) : "---";

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤ÙƒØ¯ (Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ§Ø±ØºØ©)
    const confirmerName = d.confirmed_by || "---";
    const confirmerPhone = d.reviewer_phone || "---";

    // Ø§Ù„Ø±ØªØ¨Ø© ÙˆØ§Ù„ÙˆØ¸ÙŠÙØ©
    const jobTitle = d.job || d.gr || "---";

    // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
    const printWindow = window.open('', '_blank');

    // ÙƒØªØ§Ø¨Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ø§ÙØ°Ø© (Ù†ÙØ³ ÙƒÙˆØ¯ index.html Ùˆ injava.js Ø¨Ø§Ù„Ø¶Ø¨Ø·)
    printWindow.document.write(`
        <html lang="ar" dir="rtl">
        <head>
            <meta charset="UTF-8">
            <title>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© - ${d.fmn} ${d.frn}</title>
            <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
            <style>
                /* Ù†ÙØ³ CSS Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ index.html Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ·Ø§Ø¨Ù‚ */
                * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif !important; }
                
                body {
                    background: white; 
                    margin: 0; 
                    padding: 0; 
                    display: block;
                    width: 210mm;
                    margin: 0 auto;
                }

                #printContainer {
                    width: 100%;
                    padding: 10mm 15mm; 
                    direction: rtl;
                    color: #000;
                }

                .print-official-header {
                    display: flex; justify-content: space-between; align-items: center;
                    margin-bottom: 5px; padding-bottom: 10px; border-bottom: 3px double #000;
                }
                .print-logo-img { width: 160px; height: auto; object-fit: contain; }
                .print-titles-official { text-align: center; flex-grow: 1; }
                .print-titles-official h3 { margin: 3px 0; font-size: 16px; font-weight: 700; color: #000; }
                
                .print-form-title-box {
                    border: 2px solid #000; border-radius: 6px; padding: 8px;
                    margin: 15px 0 20px 0; text-align: center; background-color: #f9f9f9 !important;
                    -webkit-print-color-adjust: exact;
                }
                .print-main-title {
                    margin: 0; font-size: 20px; font-weight: 800; color: #000;
                    text-decoration: underline; text-underline-offset: 4px;
                }
                .print-date { margin-top: 5px; font-size: 13px; font-weight: 600; }

                .data-table { 
                    width: 100%; border-collapse: collapse; margin: 10px 0; 
                    font-size: 14px; border: 2px solid #000;
                }
                .data-table th { 
                    background-color: #eee !important; -webkit-print-color-adjust: exact;
                    padding: 7px 10px; border: 1px solid #000; width: 35%; text-align: right; font-weight: 800;
                }
                .data-table td { 
                    padding: 7px 10px; border: 1px solid #000; font-weight: 600; color: #000; text-align: right; 
                }

                .auth-box {
                    border: 2px solid #000; padding: 10px; margin: 20px 0;
                    background-color: #fff !important; font-size: 14px; text-align: center;
                }
                .auth-title { display: block; font-weight: 800; margin-bottom: 8px; font-size: 15px; }
                .auth-details { display: flex; justify-content: center; gap: 20px; }

                .signature-section {
                    margin-top: 40px; display: flex; justify-content: space-between; padding: 0 20px;
                }
                .signature-box {
                    text-align: center; border: 1px dashed #000; padding: 15px 10px; 
                    width: 220px; height: 140px; position: relative;
                }
                .signature-box strong {
                    display: block; margin-bottom: 4px; padding-bottom: 0;
                    border-bottom: none; font-size: 14px; font-weight: 800;
                }
                .signature-box small { display: block; font-size: 12px; font-weight: 600; }

                @media print {
                    @page { margin: 0; size: A4; }
                    body { margin: 0; padding: 0; }
                    #printContainer { width: 100%; }
                    .no-print { display: none; }
                }
                
                .print-btn-float {
                    position: fixed; bottom: 20px; left: 20px; 
                    background: #333; color: white; padding: 10px 20px; 
                    border-radius: 5px; cursor: pointer; border: none; font-weight: bold;
                }
            </style>
        </head>
        <body>
            <button class="print-btn-float no-print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>

            <div id="printContainer">
                <div class="print-official-header">
                    <img src="https://lh3.googleusercontent.com/d/1BqWoqh1T1lArUcwAGNF7cGnnN83niKVl" alt="Ø´Ø¹Ø§Ø±" class="print-logo-img">
                    <div class="print-titles-official">
                        <h3>Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© Ø§Ù„Ø´Ø¹Ø¨ÙŠØ©</h3>
                        <h3>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</h3>
                        <h3>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª</h3>
                        <h3>Ù…ØµÙ„Ø­Ø© ØªØ³ÙŠÙŠØ± Ù†ÙÙ‚Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
                    </div>
                    <img src="https://lh3.googleusercontent.com/d/1BqWoqh1T1lArUcwAGNF7cGnnN83niKVl" alt="Ø´Ø¹Ø§Ø±" class="print-logo-img">
                </div>

                <div class="print-form-title-box">
                    <h2 class="print-main-title">Ø§Ø³ØªÙ…Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù</h2>
                    <div class="print-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬: <span>${printDate}</span></div>
                </div>

                <table class="data-table">
                    <tr><th>Ø§Ù„Ù„Ù‚Ø¨</th><td>${d.fmn}</td></tr>
                    <tr><th>Ø§Ù„Ø§Ø³Ù…</th><td>${d.frn}</td></tr>
                    <tr><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th><td>${birthDate}</td></tr>
                    <tr><th>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ (CCP)</th><td>${d.ccp}</td></tr>
                    <tr><th>Ø±Ù‚Ù… Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</th><td>${d.ass}</td></tr>
                    <tr><th>Ø§Ù„Ø±ØªØ¨Ø© / Ø§Ù„ÙˆØ¸ÙŠÙØ©</th><td>${jobTitle}</td></tr>
                    <tr><th>Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</th><td>${d.schoolName || ''}</td></tr>
                    <tr><th>Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© / Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</th><td>${d.daaira || ''} / ${d.baladiya || ''}</td></tr>
                    <tr><th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th><td style="text-align: right;"><span dir="ltr">${d.phone}</span></td></tr>
                    <tr><th>Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ·Ù†ÙŠ (NIN)</th><td>${d.nin || ''}</td></tr>
                </table>

                <div class="auth-box">
                    <div class="auth-title">âœ… Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:</div>
                    <div class="auth-details">
                        <span>Ø§Ø³Ù… Ø§Ù„Ù…Ø¤ÙƒØ¯: <span style="font-weight:bold;">${confirmerName}</span></span>
                        <span style="border-left: 2px solid #ccc; margin: 0 10px;"></span>
                        <span>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: <span dir="ltr" style="font-weight:bold;">${confirmerPhone}</span></span>
                    </div>
                </div>

                <div class="signature-section">
                    <div class="signature-box">
                        <strong>Ø¥Ù…Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù†ÙŠ</strong>
                        <small>Ø£ØµØ±Ø­ Ø¨ØµØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</small>
                    </div>
                    <div class="signature-box">
                        <strong>Ø¥Ù…Ø¶Ø§Ø¡ ÙˆØ®ØªÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</strong>
                        <small>Ù…ØµØ§Ø¯Ù‚ Ø¹Ù„ÙŠÙ‡</small>
                    </div>
                </div>
            </div>
            
            <script>
                // Ø·Ø¨Ø§Ø¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
                window.onload = function() {
                    setTimeout(function() { window.print(); }, 500);
                }
            </script>
        </body>
        </html>
    `);
    
    printWindow.document.close();
};

// =========================================================
// ğŸ†• ØªØ¹Ø¯ÙŠÙ„ Ø¯Ù‚ÙŠÙ‚: ÙØ­Øµ ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ù…Ø¹ ØªÙˆØ­ÙŠØ¯ ØµÙŠØºØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª + ØªØµØºÙŠØ± Ø§Ù„Ù†Ø§ÙØ°Ø©
// =========================================================

// Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„ÙØ­Øµ ÙˆØ§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
window.checkNonRegistered = async function() {
    // 1. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    Swal.fire({
        title: 'Ø¬Ø§Ø±ÙŠ Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...',
        html: 'ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø¨Ø¯Ù‚Ø©.<br>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...',
        allowOutsideClick: false,
        didOpen: () => {
            Swal.showLoading();
        }
    });

    try {
        // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
        const response = await fetch(scriptURL + "?action=read_all");
        const result = await response.json();
        
        if (result.status !== "success") {
            throw new Error("ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©");
        }
        allData = result.data; // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø«Ø©

        // 3. Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Firebase Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
        const colRef = collection(db, "employeescompay");
        const snapshot = await getDocs(colRef);
        const firebaseData = snapshot.docs.map(doc => doc.data());

        // 4. Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚ (Normalization)
        
        // Ø£) Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© CCP Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø¨Ø¹Ø¯ ØªÙ†Ø¸ÙŠÙÙ‡Ø§ (ØªØ­ÙˆÙŠÙ„ Ù„Ù†Øµ + Ø­Ø°Ù Ù…Ø³Ø§ÙØ§Øª)
        const localCCPs = new Set(allData.map(item => String(item.ccp).trim()));

        // Ø¨) ØªØµÙÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª ÙØ§ÙŠØ±Ø¨ÙŠØ²
        nonRegisteredData = firebaseData.filter(fbItem => {
            // ØªÙ†Ø¸ÙŠÙ CCP Ø§Ù„Ù‚Ø§Ø¯Ù… Ù…Ù† ÙØ§ÙŠØ±Ø¨ÙŠØ² Ø¨Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©
            const fbCCP = String(fbItem.ccp).trim();
            
            // Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©ØŸ
            return !localCCPs.has(fbCCP);
        });

        // 5. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¹Ø±Ø¶
        const stats = {
            totalFirebase: firebaseData.length,      // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            totalLocal: allData.length,              // Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ù…Ø­Ù„ÙŠØ§Ù‹
            totalNonReg: nonRegisteredData.length    // Ø§Ù„ÙØ±Ù‚
        };

        // 6. Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        window.showNonRegisteredModal(stats);

    } catch (error) {
        console.error(error);
        Swal.fire('Ø®Ø·Ø£', 'Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙØ­Øµ: ' + error.message, 'error');
    }
};

// Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
window.showNonRegisteredModal = function(stats) {
    // Ø¨Ù†Ø§Ø¡ ØµÙÙˆÙ Ø§Ù„Ø¬Ø¯ÙˆÙ„
    const tableRows = nonRegisteredData.map((row, index) => {
        return `
            <tr style="border-bottom:1px solid #eee;">
                <td style="padding:10px;">${index + 1}</td>
                <td style="padding:10px; font-weight:bold; color:#d63384;">${row.ccp || '-'}</td>
                <td style="padding:10px; font-weight:bold;">${row.fmn || ''} ${row.frn || ''}</td>
                <td style="padding:10px;">${row.gr || '-'}</td>
                <td style="padding:10px;">${row.ass || '-'}</td>
                <td style="padding:10px;">${row.adm || '-'}</td>
            </tr>
        `;
    }).join('');

    // ØªØµÙ…ÙŠÙ… Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    const headerStats = `
        <div style="display:flex; justify-content:space-between; margin-bottom:20px; text-align:center; gap:10px;">
            <div style="background:#e3f2fd; padding:10px; border-radius:8px; flex:1; border:1px solid #90caf9;">
                <div style="font-size:12px; color:#1565c0;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                <div style="font-size:20px; font-weight:bold; color:#0d47a1;">${stats.totalFirebase}</div>
            </div>
            <div style="background:#e8f5e9; padding:10px; border-radius:8px; flex:1; border:1px solid #a5d6a7;">
                <div style="font-size:12px; color:#2e7d32;">Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</div>
                <div style="font-size:20px; font-weight:bold; color:#1b5e20;">${stats.totalLocal}</div>
            </div>
            <div style="background:#ffebee; padding:10px; border-radius:8px; flex:1; border:1px solid #ef9a9a;">
                <div style="font-size:12px; color:#c62828;">Ø§Ù„ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</div>
                <div style="font-size:20px; font-weight:bold; color:#b71c1c;">${stats.totalNonReg}</div>
            </div>
        </div>
    `;

    // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„ÙƒØ§Ù…Ù„
    // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: ØªÙ‚Ù„ÙŠØµ max-height Ù…Ù† 450px Ø¥Ù„Ù‰ 50vh Ù„Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ± Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©
    const modalContent = `
        ${headerStats}
        
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; border-bottom:1px solid #eee; padding-bottom:10px;">
            <div style="font-weight:bold;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„ØºÙŠØ± Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¨Ø¹Ø¯:</div>
            <div style="display:flex; gap:10px;">
                <button onclick="window.printNonRegistered()" class="btn" style="background-color:#2b2d42; color:white; font-size:13px;">
                    Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© <i class="fas fa-print"></i>
                </button>
                <button onclick="window.exportNonRegisteredExcel()" class="btn" style="background-color:#198754; color:white; font-size:13px;">
                    Excel <i class="fas fa-file-excel"></i>
                </button>
            </div>
        </div>

        <div class="table-responsive" style="max-height:50vh; overflow-y:auto; direction:rtl;">
            <table style="width:100%; border-collapse:collapse; font-size:13px; text-align:right;">
                <thead style="background:#f8f9fa; color:#495057; position:sticky; top:0; z-index:10;">
                    <tr>
                        <th style="padding:12px;">Ø§Ù„Ø±Ù‚Ù…</th>
                        <th style="padding:12px;">CCP</th>
                        <th style="padding:12px;">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</th>
                        <th style="padding:12px;">Ø§Ù„Ø±ØªØ¨Ø©</th>
                        <th style="padding:12px;">Ø§Ù„Ø¶Ù…Ø§Ù† (ASS)</th>
                        <th style="padding:12px;">ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</th>
                    </tr>
                </thead>
                <tbody>
                    ${nonRegisteredData.length > 0 ? tableRows : '<tr><td colspan="6" style="text-align:center; padding:20px;">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ†! âœ…</td></tr>'}
                </tbody>
            </table>
        </div>
    `;

    Swal.fire({
        title: '<strong>ØªÙ‚Ø±ÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„</strong>',
        html: modalContent,
        width: '1000px',
        showConfirmButton: true,
        confirmButtonText: 'Ø¥ØºÙ„Ø§Ù‚',
        customClass: { popup: 'swal-wide' }
    });
};

// Ø¯Ø§Ù„Ø© Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ù…Ø¹Ø¯Ù„Ø© Ù„ØªÙƒÙˆÙ† Ø¹Ù…ÙˆØ¯ÙŠØ© ÙÙ‚Ø·)
window.printNonRegistered = function() {
    const printDate = new Date().toLocaleDateString('ar-DZ');
    
    const printRows = nonRegisteredData.map((row, index) => {
        return `
            <tr>
                <td>${index + 1}</td>
                <td style="font-weight:bold;">${row.ccp}</td>
                <td>${row.fmn} ${row.frn}</td>
                <td>${row.gr || ''}</td>
                <td>${row.ass || ''}</td>
                <td>${row.adm || ''}</td>
            </tr>
        `;
    }).join('');

    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
        <html dir="rtl" lang="ar">
        <head>
            <title>Ù‚Ø§Ø¦Ù…Ø© ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</title>
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
                
                /* ÙØ±Ø¶ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ© */
                @page { 
                    size: portrait; 
                    margin: 10mm; 
                }
                
                body { font-family: 'Cairo', sans-serif; padding: 20px; }
                .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
                table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 12px; }
                th, td { border: 1px solid #000; padding: 8px; text-align: center; }
                th { background-color: #eee; font-weight: bold; }
            </style>
        </head>
        <body>
            <div class="header">
                <h3>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª</h3>
                <h2>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h2>
                <p>ØªØ§Ø±ÙŠØ®: ${printDate} - Ø§Ù„Ø¹Ø¯Ø¯: ${nonRegisteredData.length}</p>
            </div>
            <table>
                <thead>
                    <tr><th>#</th><th>CCP</th><th>Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</th><th>Ø§Ù„Ø±ØªØ¨Ø©</th><th>ASS</th><th>ADM</th></tr>
                </thead>
                <tbody>
                    ${printRows}
                </tbody>
            </table>
            <script>window.onload = function() { window.print(); }</script>
        </body>
        </html>
    `);
    printWindow.document.close();
};

// Ø¯Ø§Ù„Ø© ØªØµØ¯ÙŠØ± Excel Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Client-Side) - ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„ÙØ±Ø¶ Ø§Ù„Ù†Øµ
window.exportNonRegisteredExcel = function() {
    let tableContent = `
        <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
        <head>
            <meta charset="UTF-8">
            <style>
                td { mso-number-format:"\@"; } /* Ø¥Ø¬Ø¨Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø¹Ù„Ù‰ Ø£Ù† ØªÙƒÙˆÙ† Ù†ØµØ§Ù‹ */
            </style>
        </head>
        <body>
            <table border="1">
                <thead>
                    <tr>
                        <th style="background-color:#ccc;">CCP</th>
                        <th style="background-color:#ccc;">Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</th>
                        <th style="background-color:#ccc;">Ø§Ù„Ø±ØªØ¨Ø©</th>
                        <th style="background-color:#ccc;">Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</th>
                        <th style="background-color:#ccc;">Ø±Ù…Ø² Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</th>
                        
                    </tr>
                </thead>
                <tbody>
    `;

    nonRegisteredData.forEach(row => {
        // Ø¥Ø¶Ø§ÙØ© style='mso-number-format:"\@"' Ù„ÙƒÙ„ Ø®Ù„ÙŠØ© Ø¨Ø´ÙƒÙ„ ØµØ±ÙŠØ­
        tableContent += `
            <tr>
                <td style='mso-number-format:"\@";'>${row.ccp || ''}</td>
                <td style='mso-number-format:"\@";'>${row.fmn || ''} ${row.frn || ''}</td>
                <td style='mso-number-format:"\@";'>${row.gr || ''}</td>
                <td style='mso-number-format:"\@";'>${row.ass || ''}</td>
                <td style='mso-number-format:"\@";'>${row.adm || ''}</td>
                <td style='mso-number-format:"\@";'>${row.nin || ''}</td>
            </tr>
        `;
    });

    tableContent += `</tbody></table></body></html>`;

    const blob = new Blob([tableContent], { type: 'application/vnd.ms-excel' });
    const link = document.createElement('a');
    link.href = window.URL.createObjectURL(blob);
    link.download = `Ù‚Ø§Ø¦Ù…Ø©_ØºÙŠØ±_Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†_${new Date().toISOString().slice(0,10)}.xls`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
};

// ==========================================
// ğŸ–¨ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø¬Ù…Ø¹Ø© (Batch Print)
// ==========================================

// 1. ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
// ==========================================
// ğŸ–¨ï¸ 1. Ù†Ø§ÙØ°Ø© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (Ø¨ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ ÙˆÙ…Ù†Ø·Ù‚ Ø°ÙƒÙŠ)
// ==========================================
window.openBatchPrintModal = function() {
    let daairaOptions = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© --</option>';
    ["ØªÙˆÙ‚Ø±Øª", "ØªÙ…Ø§Ø³ÙŠÙ†", "Ø§Ù„Ù…Ù‚Ø§Ø±ÙŠÙ†", "Ø§Ù„Ø­Ø¬ÙŠØ±Ø©", "Ø§Ù„Ø·ÙŠØ¨Ø§Øª"].forEach(d => {
        daairaOptions += `<option value="${d}">${d}</option>`;
    });

    Swal.fire({
        title: '<strong>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¬Ù…Ø¹Ø©</strong>',
        html: `
            <div style="text-align: right; font-size: 14px; padding: 10px;">
                
                <div class="edit-form-group" style="margin-bottom:15px;">
                    <label style="display:block; margin-bottom:5px; font-weight:bold; color:#d63384;">1. Ø§Ø®ØªØ± Ø§Ù„Ø·ÙˆØ± (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ù„Ù„ÙÙ„ØªØ±Ø© Ø§Ù„Ø°ÙƒÙŠØ©)</label>
                    <select id="print_level" class="filter-select" style="width:100%; padding:8px;" onchange="window.updatePrintFilters('level')">
                        <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø·ÙˆØ± --</option>
                        <option value="Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ">Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
                        <option value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</option>
                        <option value="Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù†ÙˆÙŠ</option>
                        <option value="Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©">Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©</option>
                    </select>
                </div>

                <div class="edit-form-group" style="margin-bottom:15px;">
                    <label style="display:block; margin-bottom:5px; font-weight:bold;">2. Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©</label>
                    <select id="print_daaira" class="filter-select" style="width:100%; padding:8px;" onchange="window.updatePrintFilters('daaira')">
                        ${daairaOptions}
                    </select>
                </div>
                
                <div class="edit-form-group" style="margin-bottom:15px;">
                    <label style="display:block; margin-bottom:5px; font-weight:bold;">3. Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</label>
                    <select id="print_baladiya" class="filter-select" style="width:100%; padding:8px;" onchange="window.updatePrintFilters('baladiya')">
                        <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>
                    </select>
                </div>

                <div class="edit-form-group" style="margin-bottom:15px;">
                    <label style="display:block; margin-bottom:5px; font-weight:bold;">4. Ø§Ù„Ù…Ø¤Ø³Ø³Ø© (Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙƒÙ„)</label>
                    <select id="print_school" class="filter-select" style="width:100%; padding:8px;">
                        <option value="">-- ÙƒÙ„ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª --</option>
                    </select>
                </div>
                
                <div style="background:#e3f2fd; padding:10px; border-radius:5px; font-size:12px; color:#0d47a1; margin-top:10px;">
                    <i class="fas fa-info-circle"></i> Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©"ØŒ Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.
                </div>
            </div>
        `,
        showCancelButton: true,
        confirmButtonText: 'Ø¨Ø¯Ø¡ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© <i class="fas fa-print"></i>',
        cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡',
        confirmButtonColor: '#0d6efd',
        width: '600px',
        preConfirm: () => {
            return {
                daaira: document.getElementById('print_daaira').value,
                baladiya: document.getElementById('print_baladiya').value,
                level: document.getElementById('print_level').value,
                school: document.getElementById('print_school').value
            };
        }
    }).then((result) => {
        if (result.isConfirmed) {
            window.executeBatchPrint(result.value);
        }
    });
};
// ==========================================
// ğŸ–¨ï¸ 2. Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« ÙÙ„Ø§ØªØ± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (Ù…Ø¹ Ø§Ù„ØªØµÙÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)
// ==========================================
window.updatePrintFilters = function(source) { // source: 'level' Ø£Ùˆ 'daaira' Ø£Ùˆ 'baladiya'
    const pLevel = document.getElementById("print_level").value;
    const pDaaira = document.getElementById("print_daaira");
    const pBaladiya = document.getElementById("print_baladiya");
    const pSchool = document.getElementById("print_school");

    // ----------------------------------------------------
    // ğŸ§¹ Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØµÙÙŠØ± (Reset Logic)
    // ----------------------------------------------------
    
    // Ø¥Ø°Ø§ ØºÙŠØ±Ù†Ø§ Ø§Ù„Ø·ÙˆØ± -> ØµÙØ± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ÙˆØ§Ù„Ø¨Ù„Ø¯ÙŠØ© ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø©
    if (source === 'level') {
        if (pLevel !== "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©") { 
            pDaaira.value = "";
            pBaladiya.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>';
            pSchool.innerHTML = '<option value="">-- ÙƒÙ„ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª --</option>';
        }
    }
    // Ø¥Ø°Ø§ ØºÙŠØ±Ù†Ø§ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© -> ØµÙØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø©
    else if (source === 'daaira') {
        pBaladiya.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>';
        pSchool.innerHTML = '<option value="">-- ÙƒÙ„ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª --</option>';
    }
    // Ø¥Ø°Ø§ ØºÙŠØ±Ù†Ø§ Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© -> ØµÙØ± Ø§Ù„Ù…Ø¤Ø³Ø³Ø©
    else if (source === 'baladiya') {
        pSchool.innerHTML = '<option value="">-- ÙƒÙ„ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª --</option>';
    }

    // ----------------------------------------------------
    // ğŸ¢ Ù…Ù†Ø·Ù‚ Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©
    // ----------------------------------------------------
    if (pLevel === "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©") {
        pDaaira.value = "ØªÙˆÙ‚Ø±Øª";
        pBaladiya.innerHTML = ""; pBaladiya.add(new Option("ØªÙˆÙ‚Ø±Øª", "ØªÙˆÙ‚Ø±Øª")); pBaladiya.value = "ØªÙˆÙ‚Ø±Øª";
        pSchool.innerHTML = ""; pSchool.add(new Option("Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª", "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª")); pSchool.value = "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª";
        return; 
    }

    // ----------------------------------------------------
    // ğŸ”„ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ø§Ø¯ÙŠ (ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…)
    // ----------------------------------------------------
    const selectedDaaira = pDaaira.value;
    const currentBaladiya = pBaladiya.value;

    // 1. ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ù„Ø¯ÙŠØ§Øª
    pBaladiya.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>';
    
    if (selectedDaaira && baladiyaMap[selectedDaaira]) {
        baladiyaMap[selectedDaaira].forEach(bal => {
            pBaladiya.add(new Option(bal, bal));
        });
        
        // Ù‡Ø§Ù…: Ù†Ø³ØªØ±Ø¬Ø¹ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… Ù†ÙƒÙ† Ù†Ø­Ù† Ù…Ù† Ù‚Ø§Ù… Ø¨ØªØºÙŠÙŠØ± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø£Ùˆ Ø§Ù„Ø·ÙˆØ±
        if (source !== 'daaira' && source !== 'level') {
            pBaladiya.value = currentBaladiya;
        }
    }

    // 2. ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª
    pSchool.innerHTML = '<option value="">-- ÙƒÙ„ Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª --</option>';
    let schoolsList = [];

    if (pLevel === "Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ") {
        const selBal = pBaladiya.value;
        if (selBal && primarySchoolsByBaladiya[selBal]) {
            schoolsList = primarySchoolsByBaladiya[selBal];
        }
    } 
    else if (pLevel === "Ù…ØªÙˆØ³Ø·" || pLevel === "Ø«Ø§Ù†ÙˆÙŠ") {
        if (selectedDaaira && institutionsByDaaira[selectedDaaira] && institutionsByDaaira[selectedDaaira][pLevel]) {
            schoolsList = institutionsByDaaira[selectedDaaira][pLevel];
        }
    }

    schoolsList.forEach(sch => {
        pSchool.add(new Option(sch.name, sch.name));
    });
};

// 3. ØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ¨Ù†Ø§Ø¡ HTML
window.executeBatchPrint = function(filters) {
    // 1. ØªØµÙÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    let printData = allData.filter(row => {
        const matchDaaira = !filters.daaira || row.daaira === filters.daaira;
        const matchBaladiya = !filters.baladiya || row.baladiya === filters.baladiya;
        const matchLevel = !filters.level || row.level === filters.level;
        const matchSchool = !filters.school || row.schoolName === filters.school;
        return matchDaaira && matchBaladiya && matchLevel && matchSchool;
    });

    if (printData.length === 0) {
        Swal.fire('ØªÙ†Ø¨ÙŠÙ‡', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©', 'warning');
        return;
    }

    // 2. ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¤Ø³Ø³Ø©
    const groupedData = printData.reduce((acc, curr) => {
        const school = curr.schoolName || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
        if (!acc[school]) acc[school] = [];
        acc[school].push(curr);
        return acc;
    }, {});

    const sortedSchools = Object.keys(groupedData).sort();
    const printDate = new Date().toLocaleDateString('ar-DZ');
    let printContentHTML = '';

    // 3. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    sortedSchools.forEach((schoolName) => {
        const employees = groupedData[schoolName];
        
        // --- Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ---
        const total = employees.length;
        const confirmedList = employees.filter(e => String(e.confirmed).toLowerCase() === "true");
        const unconfirmedList = employees.filter(e => String(e.confirmed).toLowerCase() !== "true");
        
        const confirmedCount = confirmedList.length;
        const unconfirmedCount = unconfirmedList.length;

        // --- ØªØ¬Ù‡ÙŠØ² Ù‚Ø§Ø¦Ù…Ø© Ø£Ø³Ù…Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯ÙŠÙ† ---
        let unconfirmedNamesHTML = '';
        if (unconfirmedCount > 0) {
            unconfirmedNamesHTML = `
                <div class="unconfirmed-box">
                    <div class="unconfirmed-title">âš ï¸ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯ÙŠÙ† (${unconfirmedCount})</div>
                    <ul class="unconfirmed-list">
                        ${unconfirmedList.map(e => `<li>â–ª ${e.fmn} ${e.frn} (${e.job || 'Ø¨Ø¯ÙˆÙ† ÙˆØ¸ÙŠÙØ©'})</li>`).join('')}
                    </ul>
                </div>
            `;
        } else {
            unconfirmedNamesHTML = `
                <div class="all-confirmed-msg">
                    âœ… Ø¬Ù…ÙŠØ¹ Ù…ÙˆØ¸ÙÙŠ Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ù…Ø¤ÙƒØ¯ÙŠÙ†
                </div>
            `;
        }

        // --- (Ø£) Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙØ§ØµÙ„Ø© (Ù…Ø­Ø¯Ø«Ø©) ---
        // ØªØ¸Ù‡Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙƒØºÙ„Ø§Ù Ù„Ù„Ù…Ø¤Ø³Ø³Ø©
        printContentHTML += `
            <div class="school-separator-page">
                <div class="separator-border">
                    <div class="header-section">
                        <h1>Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© Ø§Ù„Ø´Ø¹Ø¨ÙŠØ©</h1>
                        <h2>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª</h2>
                    </div>
                    
                    <div class="school-name-box">
                        <h1>${schoolName}</h1>
                    </div>

                    <div class="stats-container">
                        <div class="stat-item total">
                            <span class="stat-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
                            <span class="stat-val">${total}</span>
                        </div>
                        <div class="stat-item confirmed">
                            <span class="stat-label">Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</span>
                            <span class="stat-val">${confirmedCount}</span>
                        </div>
                        <div class="stat-item pending">
                            <span class="stat-label">ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</span>
                            <span class="stat-val">${unconfirmedCount}</span>
                        </div>
                    </div>

                    ${unconfirmedNamesHTML}

                    <div class="footer-section">
                        <p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬: ${printDate}</p>
                    </div>
                </div>
            </div>
        `;

        // --- (Ø¨) Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ---
        employees.forEach(emp => {
            printContentHTML += window.generateSingleFormHTML(emp);
        });
    });

    // 4. Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (CSS Ù…Ø­Ø¯Ø« Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ³Ø·)
    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
        <html lang="ar" dir="rtl">
        <head>
            <title>Ø·Ø¨Ø§Ø¹Ø© Ù…Ø¬Ù…Ø¹Ø© - ${printDate}</title>
            <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
            <style>
                @page { size: A4; margin: 0; }
                body { font-family: 'Cairo', sans-serif; margin: 0; padding: 0; background: #eee; }
                
                /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙØ§ØµÙ„Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ³Ø· ÙÙŠ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª */
                .school-separator-page {
                    width: 210mm;
                    height: 296mm; /* Ø§Ø±ØªÙØ§Ø¹ A4 ÙƒØ§Ù…Ù„ */
                    background: white;
                    position: relative;
                    display: flex;
                    justify-content: center; /* ØªÙˆØ³ÙŠØ· Ø£ÙÙ‚ÙŠ */
                    align-items: center;     /* ØªÙˆØ³ÙŠØ· Ø¹Ù…ÙˆØ¯ÙŠ */
                    page-break-after: always;
                    overflow: hidden;
                    box-sizing: border-box;
                    margin: 0 auto; /* Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ³Ø· ÙÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
                }

                .separator-border {
                    width: 90%;
                    height: 90%;
                    border: 5px double #333;
                    padding: 20px;
                    text-align: center;
                    display: flex;
                    flex-direction: column;
                    justify-content: flex-start; /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ */
                    align-items: center;
                    box-sizing: border-box;
                }

                .header-section h1, .header-section h2 { margin: 5px 0; color: #555; font-size: 16px; }
                
                .school-name-box {
                    margin: 30px 0 20px 0;
                    padding: 20px;
                    border: 2px solid #000;
                    background-color: #f8f9fa;
                    width: 100%;
                    box-sizing: border-box;
                }
                .school-name-box h1 { font-size: 28px; font-weight: 800; margin: 0; }

                /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
                .stats-container {
                    display: flex;
                    justify-content: center;
                    gap: 15px;
                    width: 100%;
                    margin-bottom: 25px;
                }
                .stat-item {
                    border: 1px solid #ddd;
                    padding: 10px;
                    border-radius: 8px;
                    width: 30%;
                    text-align: center;
                }
                .stat-label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px; }
                .stat-val { display: block; font-size: 24px; font-weight: 800; }
                
                .stat-item.total { background: #e3f2fd; color: #0d47a1; border-color: #90caf9; }
                .stat-item.confirmed { background: #e8f5e9; color: #1b5e20; border-color: #a5d6a7; }
                .stat-item.pending { background: #ffebee; color: #b71c1c; border-color: #ef9a9a; }

                /* ØªÙ†Ø³ÙŠÙ‚ Ù‚Ø§Ø¦Ù…Ø© ØºÙŠØ± Ø§Ù„Ù…Ø¤ÙƒØ¯ÙŠÙ† */
                .unconfirmed-box {
                    width: 100%;
                    border: 2px dashed #d9534f;
                    background-color: #fffdfd;
                    border-radius: 8px;
                    padding: 10px;
                    text-align: right;
                    flex-grow: 1; /* ÙŠØ£Ø®Ø° Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© */
                    overflow: hidden;
                }
                .unconfirmed-title {
                    font-weight: bold; color: #d9534f; border-bottom: 1px solid #eee; 
                    padding-bottom: 5px; margin-bottom: 10px; text-align: center;
                }
                .unconfirmed-list {
                    list-style: none; padding: 0; margin: 0;
                    column-count: 2; /* ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù„Ø¹Ù…ÙˆØ¯ÙŠÙ† */
                    column-gap: 20px;
                    font-size: 13px;
                }
                .unconfirmed-list li { margin-bottom: 5px; border-bottom: 1px solid #f0f0f0; }

                .all-confirmed-msg {
                    margin-top: 50px;
                    padding: 20px;
                    font-size: 20px;
                    color: #28a745;
                    font-weight: bold;
                    border: 2px solid #28a745;
                    border-radius: 10px;
                }

                .footer-section { margin-top: auto; font-size: 12px; color: #777; }

                /* Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© */
                .form-page-container {
                    width: 210mm;
                    height: 296mm;
                    background: white;
                    padding: 10mm 15mm;
                    margin: 0 auto;
                    box-sizing: border-box;
                    page-break-after: always;
                }

                @media print {
                    body { background: white; }
                    .no-print { display: none !important; }
                    /* Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ù…ØªØµÙØ­ Ø¹Ù„Ù‰ Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ */
                    .school-separator-page, .form-page-container { 
                        width: 210mm; height: 296mm; 
                        page-break-after: always;
                    }
                }
                .print-btn-float { position: fixed; bottom: 20px; left: 20px; background: #333; color: white; padding: 15px 30px; border-radius: 5px; cursor: pointer; border: none; font-weight: bold; font-size: 16px; z-index: 999; }
                
                /* Ø¨Ù‚ÙŠØ© ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (Ø¶Ø±ÙˆØ±ÙŠØ© Ù„Ù„Ø¹Ø±Ø¶) */
                .print-official-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; padding-bottom: 10px; border-bottom: 3px double #000; }
                .print-logo-img { width: 100px; height: auto; object-fit: contain; }
                .print-titles-official { text-align: center; flex-grow: 1; }
                .print-titles-official h3 { margin: 2px 0; font-size: 14px; font-weight: 700; color: #000; }
                .print-form-title-box { border: 2px solid #000; border-radius: 6px; padding: 5px; margin: 10px 0 15px 0; text-align: center; background-color: #f9f9f9 !important; -webkit-print-color-adjust: exact; }
                .print-main-title { margin: 0; font-size: 18px; font-weight: 800; color: #000; text-decoration: underline; text-underline-offset: 4px; }
                .print-date { margin-top: 5px; font-size: 11px; font-weight: 600; }
                .data-table { width: 100%; border-collapse: collapse; margin: 5px 0; font-size: 13px; border: 2px solid #000; }
                .data-table th { background-color: #eee !important; -webkit-print-color-adjust: exact; padding: 5px 8px; border: 1px solid #000; width: 35%; text-align: right; font-weight: 800; }
                .data-table td { padding: 5px 8px; border: 1px solid #000; font-weight: 600; color: #000; text-align: right; }
                .auth-box { border: 2px solid #000; padding: 8px; margin: 15px 0; background-color: #fff !important; font-size: 13px; text-align: center; }
                .auth-title { display: block; font-weight: 800; margin-bottom: 5px; font-size: 14px; }
                .auth-details { display: flex; justify-content: center; gap: 20px; }
                .signature-section { margin-top: 30px; display: flex; justify-content: space-between; padding: 0 20px; }
                .signature-box { text-align: center; border: 1px dashed #000; padding: 10px; width: 200px; height: 100px; }
                .signature-box strong { display: block; margin-bottom: 4px; font-size: 13px; font-weight: 800; }
                .signature-box small { display: block; font-size: 11px; font-weight: 600; }
            </style>
        </head>
        <body>
            <button class="print-btn-float no-print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙƒÙ„</button>
            ${printContentHTML}
            <script>
                window.onload = function() { setTimeout(function() { window.print(); }, 1000); }
            </script>
        </body>
        </html>
    `);
    printWindow.document.close();
};

// 4. Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªÙˆÙ„ÙŠØ¯ HTML Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© (Ø¨Ø¯ÙˆÙ† ÙØªØ­ Ù†Ø§ÙØ°Ø©)
window.generateSingleFormHTML = function(d) {
    const printDate = new Date().toLocaleDateString('ar-DZ');
    const birthDate = d.diz ? window.fmtDate(d.diz) : "---";
    const confirmerName = d.confirmed_by || "---";
    const confirmerPhone = d.reviewer_phone || "---";
    const jobTitle = d.job || d.gr || "---";

    return `
    <div class="form-page-container">
        <div class="print-official-header">
            <img src="https://lh3.googleusercontent.com/d/1BqWoqh1T1lArUcwAGNF7cGnnN83niKVl" alt="Ø´Ø¹Ø§Ø±" class="print-logo-img">
            <div class="print-titles-official">
                <h3>Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© Ø§Ù„Ø´Ø¹Ø¨ÙŠØ©</h3>
                <h3>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</h3>
                <h3>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª</h3>
                <h3>Ù…ØµÙ„Ø­Ø© ØªØ³ÙŠÙŠØ± Ù†ÙÙ‚Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
            </div>
            <img src="https://lh3.googleusercontent.com/d/1BqWoqh1T1lArUcwAGNF7cGnnN83niKVl" alt="Ø´Ø¹Ø§Ø±" class="print-logo-img">
        </div>

        <div class="print-form-title-box">
            <h2 class="print-main-title">Ø§Ø³ØªÙ…Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù</h2>
            <div class="print-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬: <span>${printDate}</span></div>
        </div>

        <table class="data-table">
            <tr><th>Ø§Ù„Ù„Ù‚Ø¨</th><td>${d.fmn}</td></tr>
            <tr><th>Ø§Ù„Ø§Ø³Ù…</th><td>${d.frn}</td></tr>
            <tr><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th><td>${birthDate}</td></tr>
            <tr><th>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ÙŠ (CCP)</th><td>${d.ccp}</td></tr>
            <tr><th>Ø±Ù‚Ù… Ø§Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</th><td>${d.ass}</td></tr>
            <tr><th>Ø§Ù„Ø±ØªØ¨Ø© / Ø§Ù„ÙˆØ¸ÙŠÙØ©</th><td>${jobTitle}</td></tr>
            <tr><th>Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</th><td>${d.schoolName || ''}</td></tr>
            <tr><th>Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© / Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</th><td>${d.daaira || ''} / ${d.baladiya || ''}</td></tr>
            <tr><th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th><td style="text-align: right;"><span dir="ltr">${d.phone}</span></td></tr>
            <tr><th>Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ·Ù†ÙŠ (NIN)</th><td>${d.nin || ''}</td></tr>
        </table>

        <div class="auth-box">
            <div class="auth-title">âœ… Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:</div>
            <div class="auth-details">
                <span>Ø§Ø³Ù… Ø§Ù„Ù…Ø¤ÙƒØ¯: <span style="font-weight:bold;">${confirmerName}</span></span>
                <span style="border-left: 2px solid #ccc; margin: 0 10px;"></span>
                <span>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: <span dir="ltr" style="font-weight:bold;">${confirmerPhone}</span></span>
            </div>
        </div>

        <div class="signature-section">
            <div class="signature-box">
                <strong>Ø¥Ù…Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù†ÙŠ</strong>
                <small>Ø£ØµØ±Ø­ Ø¨ØµØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</small>
            </div>
            <div class="signature-box">
                <strong>Ø¥Ù…Ø¶Ø§Ø¡ ÙˆØ®ØªÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</strong>
                <small>Ù…ØµØ§Ø¯Ù‚ Ø¹Ù„ÙŠÙ‡</small>
            </div>
        </div>
    </div>
    `;
};

// ==========================================
// ğŸ†• Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø®Ø±Ø§Ø¦Ø· Ø§Ù„ÙÙ„ØªØ±Ø© (Ù…Ø¹ Ø§Ù„ØªØµÙÙŠØ± Ø§Ù„Ø°ÙƒÙŠ)
// ==========================================
window.updateDashMaps = function(source) { // source: 'level' | 'daaira' | 'baladiya'
    const fLevel = document.getElementById("filter_level").value;
    const fDaaira = document.getElementById("filter_daaira");
    const fBaladiya = document.getElementById("filter_baladiya");
    const fSchool = document.getElementById("filter_school");

    // ----------------------------------------------------
    // ğŸ§¹ 1. Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØµÙÙŠØ± (Reset Logic)
    // ----------------------------------------------------
    
    // Ø¥Ø°Ø§ ØªØºÙŠØ± Ø§Ù„Ø·ÙˆØ± -> ØµÙØ± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© (Ø¥Ù„Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø¯ÙŠØ±ÙŠØ©)ØŒ ØµÙØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø©
    if (source === 'level') {
        if (fLevel !== "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©") {
            fDaaira.value = ""; 
            fBaladiya.innerHTML = '<option value="">-- Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>';
            fSchool.innerHTML = '<option value="">-- Ø§Ù„Ù…Ø¤Ø³Ø³Ø© --</option>';
        }
    }
    // Ø¥Ø°Ø§ ØªØºÙŠØ±Øª Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© -> ØµÙØ± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø©
    else if (source === 'daaira') {
        fBaladiya.innerHTML = '<option value="">-- Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>';
        fSchool.innerHTML = '<option value="">-- Ø§Ù„Ù…Ø¤Ø³Ø³Ø© --</option>';
    }
    // Ø¥Ø°Ø§ ØªØºÙŠØ±Øª Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© -> ØµÙØ± Ø§Ù„Ù…Ø¤Ø³Ø³Ø©
    else if (source === 'baladiya') {
        fSchool.innerHTML = '<option value="">-- Ø§Ù„Ù…Ø¤Ø³Ø³Ø© --</option>';
    }

    // ----------------------------------------------------
    // ğŸ¢ 2. Ù…Ù†Ø·Ù‚ Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© (ØªØ¹Ø¨Ø¦Ø© Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©)
    // ----------------------------------------------------
    if (fLevel === "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ©") {
        fDaaira.value = "ØªÙˆÙ‚Ø±Øª";
        
        fBaladiya.innerHTML = ""; 
        fBaladiya.add(new Option("ØªÙˆÙ‚Ø±Øª", "ØªÙˆÙ‚Ø±Øª")); 
        fBaladiya.value = "ØªÙˆÙ‚Ø±Øª";

        fSchool.innerHTML = ""; 
        fSchool.add(new Option("Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª", "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª")); 
        fSchool.value = "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù„ÙˆÙ„Ø§ÙŠØ© ØªÙˆÙ‚Ø±Øª";
        
        return; 
    }

    // ----------------------------------------------------
    // ğŸ”„ 3. Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ù„Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ø·ÙˆØ§Ø±
    // ----------------------------------------------------
    const selectedDaaira = fDaaira.value;
    const currentBaladiya = fBaladiya.value; // Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¥Ø°Ø§ Ù„Ù… Ù†ÙƒÙ† Ù†Ø­Ù† Ù…Ù† ØµÙØ±Ù‡Ø§

    // Ø£) ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ù„Ø¯ÙŠØ§Øª
    fBaladiya.innerHTML = '<option value="">-- Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© --</option>';
    
    if (selectedDaaira && baladiyaMap[selectedDaaira]) {
        baladiyaMap[selectedDaaira].forEach(bal => {
            fBaladiya.add(new Option(bal, bal));
        });
        
        // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù‚ÙŠÙ…Ø© ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… Ù†Ù‚Ù… Ø¨ØªØºÙŠÙŠØ± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø£Ùˆ Ø§Ù„Ø·ÙˆØ± Ù„Ù„ØªÙˆ
        if (source !== 'daaira' && source !== 'level') {
            fBaladiya.value = currentBaladiya;
        }
    }

    // Ø¨) ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª
    fSchool.innerHTML = '<option value="">-- Ø§Ù„Ù…Ø¤Ø³Ø³Ø© --</option>';
    let schoolsList = [];

    if (fLevel === "Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ") {
        const selBal = fBaladiya.value;
        if (selBal && primarySchoolsByBaladiya[selBal]) {
            schoolsList = primarySchoolsByBaladiya[selBal];
        }
    } 
    else if (fLevel === "Ù…ØªÙˆØ³Ø·" || fLevel === "Ø«Ø§Ù†ÙˆÙŠ") {
        if (selectedDaaira && institutionsByDaaira[selectedDaaira] && institutionsByDaaira[selectedDaaira][fLevel]) {
            schoolsList = institutionsByDaaira[selectedDaaira][fLevel];
        }
    }

    // Ù…Ù„Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    schoolsList.forEach(sch => {
        fSchool.add(new Option(sch.name, sch.name));
    });
};



